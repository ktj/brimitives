{"version":3,"sources":["node_modules/react-native/Libraries/Network/NetInfo.js"],"names":["Map","require","NativeEventEmitter","NativeModules","Platform","RCTNetInfo","NetInfo","NetInfoEventEmitter","DEVICE_CONNECTIVITY_EVENT","_subscriptions","_isConnectedDeprecated","OS","reachability","connectionType","_isConnected","connection","type","_isConnectedSubscriptions","addEventListener","eventName","handler","listener","addListener","appStateData","effectiveType","effectiveConnectionType","console","warn","network_info","remove","set","removeEventListener","get","delete","fetch","getCurrentConnectivity","then","resp","getConnectionInfo","isConnected","isConnectionExpensive","isConnectionMetered","Promise","reject","Error","module","exports"],"mappings":"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","file":"NetInfo.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule NetInfo\n * @flow\n */\n'use strict';\n\nconst Map = require('Map');\nconst NativeEventEmitter = require('NativeEventEmitter');\nconst NativeModules = require('NativeModules');\nconst Platform = require('Platform');\nconst RCTNetInfo = NativeModules.NetInfo;\n\nconst NetInfoEventEmitter = new NativeEventEmitter(RCTNetInfo);\n\nconst DEVICE_CONNECTIVITY_EVENT = 'networkStatusDidChange';\n\ntype ChangeEventName = $Enum<{\n  connectionChange: string,\n  change: string,\n}>;\n\ntype ReachabilityStateIOS = $Enum<{\n  cell: string,\n  none: string,\n  unknown: string,\n  wifi: string,\n}>;\n\ntype ConnectivityStateAndroid = $Enum<{\n  NONE: string,\n  MOBILE: string,\n  WIFI: string,\n  MOBILE_MMS: string,\n  MOBILE_SUPL: string,\n  MOBILE_DUN: string,\n  MOBILE_HIPRI: string,\n  WIMAX: string,\n  BLUETOOTH: string,\n  DUMMY: string,\n  ETHERNET: string,\n  MOBILE_FOTA: string,\n  MOBILE_IMS: string,\n  MOBILE_CBS: string,\n  WIFI_P2P: string,\n  MOBILE_IA: string,\n  MOBILE_EMERGENCY: string,\n  PROXY: string,\n  VPN: string,\n  UNKNOWN: string,\n}>;\n\n\nconst _subscriptions = new Map();\n\nlet _isConnectedDeprecated;\nif (Platform.OS === 'ios') {\n  _isConnectedDeprecated = function(\n    reachability: ReachabilityStateIOS,\n  ): bool {\n    return reachability !== 'none' && reachability !== 'unknown';\n  };\n} else if (Platform.OS === 'android') {\n  _isConnectedDeprecated = function(\n      connectionType: ConnectivityStateAndroid,\n    ): bool {\n    return connectionType !== 'NONE' && connectionType !== 'UNKNOWN';\n  };\n}\n\nfunction _isConnected(connection) {\n  return connection.type !== 'none' && connection.type !== 'unknown';\n}\n\nconst _isConnectedSubscriptions = new Map();\n\n/**\n * NetInfo exposes info about online/offline status\n *\n * ```\n * NetInfo.getConnectionInfo().then((connectionInfo) => {\n *   console.log('Initial, type: ' + connectionInfo.type + ', effectiveType: ' + connectionInfo.effectiveType);\n * });\n * function handleFirstConnectivityChange(connectionInfo) {\n *   console.log('First change, type: ' + connectionInfo.type + ', effectiveType: ' + connectionInfo.effectiveType);\n *   NetInfo.removeEventListener(\n *     'connectionChange',\n *     handleFirstConnectivityChange\n *   );\n * }\n * NetInfo.addEventListener(\n *   'connectionChange',\n *   handleFirstConnectivityChange\n * );\n * ```\n *\n * ### ConnectionType enum\n *\n * `ConnectionType` describes the type of connection the device is using to communicate with the network.\n *\n * Cross platform values for `ConnectionType`:\n * - `none` - device is offline\n * - `wifi` - device is online and connected via wifi, or is the iOS simulator\n * - `cellular` - device is connected via Edge, 3G, WiMax, or LTE\n * - `unknown` - error case and the network status is unknown\n *\n * Android-only values for `ConnectionType`:\n * - `bluetooth` - device is connected via Bluetooth\n * - `ethernet` - device is connected via Ethernet\n * - `wimax` - device is connected via WiMAX\n *\n * ### EffectiveConnectionType enum\n *\n * Cross platform values for `EffectiveConnectionType`:\n * - `2g`\n * - `3g`\n * - `4g`\n * - `unknown`\n *\n * ### Android\n *\n * To request network info, you need to add the following line to your\n * app's `AndroidManifest.xml`:\n *\n * `<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />`\n *\n * ### isConnectionExpensive\n *\n * Available on Android. Detect if the current active connection is metered or not. A network is\n * classified as metered when the user is sensitive to heavy data usage on that connection due to\n * monetary costs, data limitations or battery/performance issues.\n *\n * ```\n * NetInfo.isConnectionExpensive()\n * .then(isConnectionExpensive => {\n *   console.log('Connection is ' + (isConnectionExpensive ? 'Expensive' : 'Not Expensive'));\n * })\n * .catch(error => {\n *   console.error(error);\n * });\n * ```\n *\n * ### isConnected\n *\n * Available on all platforms. Asynchronously fetch a boolean to determine\n * internet connectivity.\n *\n * ```\n * NetInfo.isConnected.fetch().then(isConnected => {\n *   console.log('First, is ' + (isConnected ? 'online' : 'offline'));\n * });\n * function handleFirstConnectivityChange(isConnected) {\n *   console.log('Then, is ' + (isConnected ? 'online' : 'offline'));\n *   NetInfo.isConnected.removeEventListener(\n *     'change',\n *     handleFirstConnectivityChange\n *   );\n * }\n * NetInfo.isConnected.addEventListener(\n *   'change',\n *   handleFirstConnectivityChange\n * );\n * ```\n *\n * ### Connectivity Types (deprecated)\n *\n * The following connectivity types are deprecated. They're used by the deprecated APIs `fetch` and the `change` event.\n *\n * iOS connectivity types (deprecated):\n * - `none` - device is offline\n * - `wifi` - device is online and connected via wifi, or is the iOS simulator\n * - `cell` - device is connected via Edge, 3G, WiMax, or LTE\n * - `unknown` - error case and the network status is unknown\n *\n * Android connectivity types (deprecated).\n * - `NONE` - device is offline\n * - `BLUETOOTH` - The Bluetooth data connection.\n * - `DUMMY` -  Dummy data connection.\n * - `ETHERNET` - The Ethernet data connection.\n * - `MOBILE` - The Mobile data connection.\n * - `MOBILE_DUN` - A DUN-specific Mobile data connection.\n * - `MOBILE_HIPRI` - A High Priority Mobile data connection.\n * - `MOBILE_MMS` - An MMS-specific Mobile data connection.\n * - `MOBILE_SUPL` -  A SUPL-specific Mobile data connection.\n * - `VPN` -  A virtual network using one or more native bearers. Requires API Level 21\n * - `WIFI` - The WIFI data connection.\n * - `WIMAX` -  The WiMAX data connection.\n * - `UNKNOWN` - Unknown data connection.\n *\n * The rest of the connectivity types are hidden by the Android API, but can be used if necessary.\n */\nconst NetInfo = {\n  /**\n   * Adds an event handler. Supported events:\n   *\n   * - `connectionChange`: Fires when the network status changes. The argument to the event\n   *   handler is an object with keys:\n   *   - `type`: A `ConnectionType` (listed above)\n   *   - `effectiveType`: An `EffectiveConnectionType` (listed above)\n   * - `change`: This event is deprecated. Listen to `connectionChange` instead. Fires when\n   *   the network status changes. The argument to the event handler is one of the deprecated\n   *   connectivity types listed above.\n   */\n  addEventListener(\n    eventName: ChangeEventName,\n    handler: Function\n  ): {remove: () => void} {\n    let listener;\n    if (eventName === 'connectionChange') {\n      listener = NetInfoEventEmitter.addListener(\n        DEVICE_CONNECTIVITY_EVENT,\n        (appStateData) => {\n          handler({\n            type: appStateData.connectionType,\n            effectiveType: appStateData.effectiveConnectionType\n          });\n        }\n      );\n    } else if (eventName === 'change') {\n      console.warn('NetInfo\\'s \"change\" event is deprecated. Listen to the \"connectionChange\" event instead.');\n\n      listener = NetInfoEventEmitter.addListener(\n        DEVICE_CONNECTIVITY_EVENT,\n        (appStateData) => {\n          handler(appStateData.network_info);\n        }\n      );\n    } else {\n      console.warn('Trying to subscribe to unknown event: \"' + eventName + '\"');\n      return {\n        remove: () => {}\n      };\n    }\n\n    _subscriptions.set(handler, listener);\n    return {\n      remove: () => NetInfo.removeEventListener(eventName, handler)\n    };\n  },\n\n  /**\n   * Removes the listener for network status changes.\n   */\n  removeEventListener(\n    eventName: ChangeEventName,\n    handler: Function\n  ): void {\n    const listener = _subscriptions.get(handler);\n    if (!listener) {\n      return;\n    }\n    listener.remove();\n    _subscriptions.delete(handler);\n  },\n\n  /**\n   * This function is deprecated. Use `getConnectionInfo` instead. Returns a promise that\n   * resolves with one of the deprecated connectivity types listed above.\n   */\n  fetch(): Promise<any> {\n    console.warn('NetInfo.fetch() is deprecated. Use NetInfo.getConnectionInfo() instead.');\n    return RCTNetInfo.getCurrentConnectivity().then(resp => resp.network_info);\n  },\n\n  /**\n   * Returns a promise that resolves to an object with `type` and `effectiveType` keys\n   * whose values are a `ConnectionType` and an `EffectiveConnectionType`, (described above),\n   * respectively.\n   */\n  getConnectionInfo(): Promise<any> {\n    return RCTNetInfo.getCurrentConnectivity().then(resp => {\n      return {\n        type: resp.connectionType,\n        effectiveType: resp.effectiveConnectionType,\n      };\n    });\n  },\n\n  /**\n   * An object with the same methods as above but the listener receives a\n   * boolean which represents the internet connectivity.\n   * Use this if you are only interested with whether the device has internet\n   * connectivity.\n   */\n  isConnected: {\n    addEventListener(\n      eventName: ChangeEventName,\n      handler: Function\n    ): {remove: () => void} {\n      const listener = (connection) => {\n        if (eventName === 'change') {\n          handler(_isConnectedDeprecated(connection));\n        } else if (eventName === 'connectionChange') {\n          handler(_isConnected(connection));\n        }\n      };\n      _isConnectedSubscriptions.set(handler, listener);\n      NetInfo.addEventListener(\n        eventName,\n        listener\n      );\n      return {\n        remove: () => NetInfo.isConnected.removeEventListener(eventName, handler)\n      };\n    },\n\n    removeEventListener(\n      eventName: ChangeEventName,\n      handler: Function\n    ): void {\n      const listener = _isConnectedSubscriptions.get(handler);\n      NetInfo.removeEventListener(\n        eventName,\n        /* $FlowFixMe(>=0.36.0 site=react_native_fb,react_native_oss) Flow error\n         * detected during the deploy of Flow v0.36.0. To see the error, remove\n         * this comment and run Flow */\n        listener\n      );\n      _isConnectedSubscriptions.delete(handler);\n    },\n\n    fetch(): Promise<any> {\n      return NetInfo.getConnectionInfo().then(_isConnected);\n    },\n  },\n\n  isConnectionExpensive(): Promise<boolean> {\n    return (\n      Platform.OS === 'android' ? RCTNetInfo.isConnectionMetered() : Promise.reject(new Error('Currently not supported on iOS'))\n    );\n  },\n};\n\nmodule.exports = NetInfo;\n"]}