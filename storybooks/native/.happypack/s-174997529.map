{"version":3,"sources":["node_modules/react-native/Libraries/Utilities/defineLazyObjectProperty.js"],"names":["defineLazyObjectProperty","object","name","descriptor","get","enumerable","writable","value","valueSet","getValue","setValue","newValue","Object","defineProperty","configurable","set","module","exports"],"mappings":";;;;;;;;;;;;AAYA;;;;;AAKA,QAASA,yBAAT;AACEC,MADF;AAEEC,IAFF;AAGEC,UAHF;;;;;AAQQ;AACCC,GADD,CACQD,UADR,CACCC,GADD;AAEN,GAAMC,YAAaF,WAAWE,UAAX,GAA0B,KAA7C;AACA,GAAMC,UAAWH,WAAWG,QAAX,GAAwB,KAAzC;;AAEA,GAAIC,aAAJ;AACA,GAAIC,UAAW,KAAf;AACA,QAASC,SAAT,EAAuB;;;;AAIrB,GAAI,CAACD,QAAL,CAAe;;;;;;AAMbA,SAAW,IAAX;AACAE,SAASN,KAAT;AACD;AACD,MAAOG,MAAP;AACD;AACD,QAASG,SAAT,CAAkBC,QAAlB,CAAqC;AACnCJ,MAAQI,QAAR;AACAH,SAAW,IAAX;AACAI,OAAOC,cAAP,CAAsBZ,MAAtB,CAA8BC,IAA9B,CAAoC;AAClCK,MAAOI,QAD2B;AAElCG,aAAc,IAFoB;AAGlCT,qBAHkC;AAIlCC,iBAJkC,CAApC;;AAMD;;AAEDM,OAAOC,cAAP,CAAsBZ,MAAtB,CAA8BC,IAA9B,CAAoC;AAClCE,IAAKK,QAD6B;AAElCM,IAAKL,QAF6B;AAGlCI,aAAc,IAHoB;AAIlCT,qBAJkC,CAApC;;AAMD;;AAEDW,OAAOC,OAAP,CAAiBjB,wBAAjB,C,0GAjDSA,wB","file":"defineLazyObjectProperty.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule defineLazyObjectProperty\n * @flow\n */\n\n'use strict';\n\n/**\n * Defines a lazily evaluated property on the supplied `object`.\n */\nfunction defineLazyObjectProperty<T>(\n  object: Object,\n  name: string,\n  descriptor: {\n    get: () => T,\n    enumerable?: boolean,\n    writable?: boolean,\n  },\n): void {\n  const {get} = descriptor;\n  const enumerable = descriptor.enumerable !== false;\n  const writable = descriptor.writable !== false;\n\n  let value;\n  let valueSet = false;\n  function getValue(): T {\n    // WORKAROUND: A weird infinite loop occurs where calling `getValue` calls\n    // `setValue` which calls `Object.defineProperty` which somehow triggers\n    // `getValue` again. Adding `valueSet` breaks this loop.\n    if (!valueSet) {\n      // Calling `get()` here can trigger an infinite loop if it fails to\n      // remove the getter on the property, which can happen when executing\n      // JS in a V8 context.  `valueSet = true` will break this loop, and\n      // sets the value of the property to undefined, until the code in `get()`\n      // finishes, at which point the property is set to the correct value.\n      valueSet = true;\n      setValue(get());\n    }\n    return value;\n  }\n  function setValue(newValue: T): void {\n    value = newValue;\n    valueSet = true;\n    Object.defineProperty(object, name, {\n      value: newValue,\n      configurable: true,\n      enumerable,\n      writable,\n    });\n  }\n\n  Object.defineProperty(object, name, {\n    get: getValue,\n    set: setValue,\n    configurable: true,\n    enumerable,\n  });\n}\n\nmodule.exports = defineLazyObjectProperty;\n"]}