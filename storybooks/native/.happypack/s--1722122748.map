{"version":3,"sources":["node_modules/react-native/Libraries/Components/RefreshControl/RefreshControl.js"],"names":["ColorPropType","require","NativeMethodsMixin","Platform","React","PropTypes","ViewPropTypes","createReactClass","requireNativeComponent","OS","RefreshLayoutConsts","AndroidSwipeRefreshLayout","Constants","SIZE","RefreshControl","displayName","statics","mixins","propTypes","onRefresh","func","refreshing","bool","isRequired","tintColor","titleColor","title","string","enabled","colors","arrayOf","progressBackgroundColor","size","oneOf","DEFAULT","LARGE","progressViewOffset","number","_nativeRef","_lastNativeRefreshing","componentDidMount","props","componentDidUpdate","prevProps","setNativeProps","render","ref","_onRefresh","forceUpdate","NativeRefreshControl","module","exports"],"mappings":"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","file":"RefreshControl.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule RefreshControl\n * @flow\n */\n'use strict';\n\nconst ColorPropType = require('ColorPropType');\nconst NativeMethodsMixin = require('NativeMethodsMixin');\nconst Platform = require('Platform');\nconst React = require('React');\nconst PropTypes = require('prop-types');\nconst ViewPropTypes = require('ViewPropTypes');\n\nconst createReactClass = require('create-react-class');\nconst requireNativeComponent = require('requireNativeComponent');\n\nif (Platform.OS === 'android') {\n  var RefreshLayoutConsts = require('UIManager').AndroidSwipeRefreshLayout.Constants;\n} else {\n  var RefreshLayoutConsts = {SIZE: {}};\n}\n\n/**\n * This component is used inside a ScrollView or ListView to add pull to refresh\n * functionality. When the ScrollView is at `scrollY: 0`, swiping down\n * triggers an `onRefresh` event.\n *\n * ### Usage example\n *\n * ``` js\n * class RefreshableList extends Component {\n *   constructor(props) {\n *     super(props);\n *     this.state = {\n *       refreshing: false,\n *     };\n *   }\n *\n *   _onRefresh() {\n *     this.setState({refreshing: true});\n *     fetchData().then(() => {\n *       this.setState({refreshing: false});\n *     });\n *   }\n *\n *   render() {\n *     return (\n *       <ListView\n *         refreshControl={\n *           <RefreshControl\n *             refreshing={this.state.refreshing}\n *             onRefresh={this._onRefresh.bind(this)}\n *           />\n *         }\n *         ...\n *       >\n *       ...\n *       </ListView>\n *     );\n *   }\n *   ...\n * }\n * ```\n *\n * __Note:__ `refreshing` is a controlled prop, this is why it needs to be set to true\n * in the `onRefresh` function otherwise the refresh indicator will stop immediately.\n */\n// $FlowFixMe(>=0.41.0)\nconst RefreshControl = createReactClass({\n  displayName: 'RefreshControl',\n  statics: {\n    SIZE: RefreshLayoutConsts.SIZE,\n  },\n\n  mixins: [NativeMethodsMixin],\n\n  propTypes: {\n    ...ViewPropTypes,\n    /**\n     * Called when the view starts refreshing.\n     */\n    onRefresh: PropTypes.func,\n    /**\n     * Whether the view should be indicating an active refresh.\n     */\n    refreshing: PropTypes.bool.isRequired,\n    /**\n     * The color of the refresh indicator.\n     * @platform ios\n     */\n    tintColor: ColorPropType,\n    /**\n     * Title color.\n     * @platform ios\n     */\n    titleColor: ColorPropType,\n    /**\n     * The title displayed under the refresh indicator.\n     * @platform ios\n     */\n    title: PropTypes.string,\n    /**\n     * Whether the pull to refresh functionality is enabled.\n     * @platform android\n     */\n    enabled: PropTypes.bool,\n    /**\n     * The colors (at least one) that will be used to draw the refresh indicator.\n     * @platform android\n     */\n    colors: PropTypes.arrayOf(ColorPropType),\n    /**\n     * The background color of the refresh indicator.\n     * @platform android\n     */\n    progressBackgroundColor: ColorPropType,\n    /**\n     * Size of the refresh indicator, see RefreshControl.SIZE.\n     * @platform android\n     */\n    size: PropTypes.oneOf([RefreshLayoutConsts.SIZE.DEFAULT, RefreshLayoutConsts.SIZE.LARGE]),\n    /**\n     * Progress view top offset\n     * @platform android\n     */\n    progressViewOffset: PropTypes.number,\n  },\n\n  _nativeRef: (null: any),\n  _lastNativeRefreshing: false,\n\n  componentDidMount() {\n    this._lastNativeRefreshing = this.props.refreshing;\n  },\n\n  componentDidUpdate(prevProps: {refreshing: boolean}) {\n    // RefreshControl is a controlled component so if the native refreshing\n    // value doesn't match the current js refreshing prop update it to\n    // the js value.\n    if (this.props.refreshing !== prevProps.refreshing) {\n      this._lastNativeRefreshing = this.props.refreshing;\n    } else if (this.props.refreshing !== this._lastNativeRefreshing) {\n      this._nativeRef.setNativeProps({refreshing: this.props.refreshing});\n      this._lastNativeRefreshing = this.props.refreshing;\n    }\n  },\n\n  render() {\n    return (\n      <NativeRefreshControl\n        {...this.props}\n        ref={ref => {this._nativeRef = ref;}}\n        onRefresh={this._onRefresh}\n      />\n    );\n  },\n\n  _onRefresh() {\n    this._lastNativeRefreshing = true;\n\n    this.props.onRefresh && this.props.onRefresh();\n\n    // The native component will start refreshing so force an update to\n    // make sure it stays in sync with the js component.\n    this.forceUpdate();\n  },\n});\n\nif (Platform.OS === 'ios') {\n  var NativeRefreshControl = requireNativeComponent(\n    'RCTRefreshControl',\n    RefreshControl\n  );\n} else if (Platform.OS === 'android') {\n  var NativeRefreshControl = requireNativeComponent(\n    'AndroidSwipeRefreshLayout',\n    RefreshControl\n  );\n}\n\nmodule.exports = RefreshControl;\n"]}