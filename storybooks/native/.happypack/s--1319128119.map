{"version":3,"sources":["node_modules/react-native/Libraries/Image/Image.ios.js"],"names":["EdgeInsetsPropType","require","ImageResizeMode","ImageSourcePropType","ImageStylePropTypes","NativeMethodsMixin","NativeModules","React","PropTypes","ReactNativeViewAttributes","StyleSheet","StyleSheetPropType","createReactClass","flattenStyle","requireNativeComponent","resolveAssetSource","ImageViewManager","Image","displayName","propTypes","style","source","defaultSource","oneOfType","shape","uri","string","width","number","height","scale","accessible","bool","accessibilityLabel","node","blurRadius","capInsets","resizeMethod","oneOf","resizeMode","testID","onLayout","func","onLoadStart","onProgress","onError","onPartialLoad","onLoad","onLoadEnd","statics","getSize","success","failure","console","warn","prefetch","url","prefetchImage","mixins","viewConfig","uiViewClassName","validAttributes","UIView","render","props","undefined","sources","Array","isArray","styles","base","tintColor","src","create","overflow","RCTImageView","module","exports"],"mappings":"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","file":"Image.ios.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Image\n * @flow\n */\n'use strict';\n\nconst EdgeInsetsPropType = require('EdgeInsetsPropType');\nconst ImageResizeMode = require('ImageResizeMode');\nconst ImageSourcePropType = require('ImageSourcePropType');\nconst ImageStylePropTypes = require('ImageStylePropTypes');\nconst NativeMethodsMixin = require('NativeMethodsMixin');\nconst NativeModules = require('NativeModules');\nconst React = require('React');\nconst PropTypes = require('prop-types');\nconst ReactNativeViewAttributes = require('ReactNativeViewAttributes');\nconst StyleSheet = require('StyleSheet');\nconst StyleSheetPropType = require('StyleSheetPropType');\n\nconst createReactClass = require('create-react-class');\nconst flattenStyle = require('flattenStyle');\nconst requireNativeComponent = require('requireNativeComponent');\nconst resolveAssetSource = require('resolveAssetSource');\n\nconst ImageViewManager = NativeModules.ImageViewManager;\n\n/**\n * A React component for displaying different types of images,\n * including network images, static resources, temporary local images, and\n * images from local disk, such as the camera roll.\n *\n * This example shows fetching and displaying an image from local storage\n * as well as one from network and even from data provided in the `'data:'` uri scheme.\n *\n * > Note that for network and data images, you will need to manually specify the dimensions of your image!\n *\n * ```ReactNativeWebPlayer\n * import React, { Component } from 'react';\n * import { AppRegistry, View, Image } from 'react-native';\n *\n * export default class DisplayAnImage extends Component {\n *   render() {\n *     return (\n *       <View>\n *         <Image\n *           source={require('./img/favicon.png')}\n *         />\n *         <Image\n *           style={{width: 50, height: 50}}\n *           source={{uri: 'https://facebook.github.io/react/img/logo_og.png'}}\n *         />\n *         <Image\n *           style={{width: 66, height: 58}}\n *           source={{uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg=='}}\n *         />\n *       </View>\n *     );\n *   }\n * }\n *\n * // skip this line if using Create React Native App\n * AppRegistry.registerComponent('DisplayAnImage', () => DisplayAnImage);\n * ```\n *\n * You can also add `style` to an image:\n *\n * ```ReactNativeWebPlayer\n * import React, { Component } from 'react';\n * import { AppRegistry, View, Image, StyleSheet } from 'react-native';\n *\n * const styles = StyleSheet.create({\n *   stretch: {\n *     width: 50,\n *     height: 200\n *   }\n * });\n *\n * export default class DisplayAnImageWithStyle extends Component {\n *   render() {\n *     return (\n *       <View>\n *         <Image\n *           style={styles.stretch}\n *           source={require('./img/favicon.png')}\n *         />\n *       </View>\n *     );\n *   }\n * }\n *\n * // skip these lines if using Create React Native App\n * AppRegistry.registerComponent(\n *   'DisplayAnImageWithStyle',\n *   () => DisplayAnImageWithStyle\n * );\n * ```\n *\n * ### GIF and WebP support on Android\n *\n * When building your own native code, GIF and WebP are not supported by default on Android.\n *\n * You will need to add some optional modules in `android/app/build.gradle`, depending on the needs of your app.\n *\n * ```\n * dependencies {\n *   // If your app supports Android versions before Ice Cream Sandwich (API level 14)\n *   compile 'com.facebook.fresco:animated-base-support:1.3.0'\n *\n *   // For animated GIF support\n *   compile 'com.facebook.fresco:animated-gif:1.3.0'\n *\n *   // For WebP support, including animated WebP\n *   compile 'com.facebook.fresco:animated-webp:1.3.0'\n *   compile 'com.facebook.fresco:webpsupport:1.3.0'\n *\n *   // For WebP support, without animations\n *   compile 'com.facebook.fresco:webpsupport:1.3.0'\n * }\n * ```\n *\n * Also, if you use GIF with ProGuard, you will need to add this rule in `proguard-rules.pro` :\n * ```\n * -keep class com.facebook.imagepipeline.animated.factory.AnimatedFactoryImpl {\n *   public AnimatedFactoryImpl(com.facebook.imagepipeline.bitmaps.PlatformBitmapFactory, com.facebook.imagepipeline.core.ExecutorSupplier);\n * }\n * ```\n *\n */\n// $FlowFixMe(>=0.41.0)\nconst Image = createReactClass({\n  displayName: 'Image',\n  propTypes: {\n    /**\n     * > `ImageResizeMode` is an `Enum` for different image resizing modes, set via the\n     * > `resizeMode` style property on `Image` components. The values are `contain`, `cover`,\n     * > `stretch`, `center`, `repeat`.\n     */\n    style: StyleSheetPropType(ImageStylePropTypes),\n    /**\n     * The image source (either a remote URL or a local file resource).\n     *\n     * This prop can also contain several remote URLs, specified together with\n     * their width and height and potentially with scale/other URI arguments.\n     * The native side will then choose the best `uri` to display based on the\n     * measured size of the image container. A `cache` property can be added to\n     * control how networked request interacts with the local cache.\n     *\n     * The currently supported formats are `png`, `jpg`, `jpeg`, `bmp`, `gif`,\n     * `webp` (Android only), `psd` (iOS only).\n     */\n    source: ImageSourcePropType,\n    /**\n     * A static image to display while loading the image source.\n     *\n     * - `uri` - a string representing the resource identifier for the image, which\n     * should be either a local file path or the name of a static image resource\n     * (which should be wrapped in the `require('./path/to/image.png')` function).\n     * - `width`, `height` - can be specified if known at build time, in which case\n     * these will be used to set the default `<Image/>` component dimensions.\n     * - `scale` - used to indicate the scale factor of the image. Defaults to 1.0 if\n     * unspecified, meaning that one image pixel equates to one display point / DIP.\n     * - `number` - Opaque type returned by something like `require('./image.jpg')`.\n     *\n     * @platform ios\n     */\n    defaultSource: PropTypes.oneOfType([\n      // TODO: Tooling to support documenting these directly and having them display in the docs.\n      PropTypes.shape({\n        uri: PropTypes.string,\n        width: PropTypes.number,\n        height: PropTypes.number,\n        scale: PropTypes.number,\n      }),\n      PropTypes.number,\n    ]),\n    /**\n     * When true, indicates the image is an accessibility element.\n     * @platform ios\n     */\n    accessible: PropTypes.bool,\n    /**\n     * The text that's read by the screen reader when the user interacts with\n     * the image.\n     * @platform ios\n     */\n    accessibilityLabel: PropTypes.node,\n    /**\n    * blurRadius: the blur radius of the blur filter added to the image\n    */\n    blurRadius: PropTypes.number,\n    /**\n     * When the image is resized, the corners of the size specified\n     * by `capInsets` will stay a fixed size, but the center content and borders\n     * of the image will be stretched.  This is useful for creating resizable\n     * rounded buttons, shadows, and other resizable assets.  More info in the\n     * [official Apple documentation](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets).\n     *\n     * @platform ios\n     */\n    capInsets: EdgeInsetsPropType,\n    /**\n     * The mechanism that should be used to resize the image when the image's dimensions\n     * differ from the image view's dimensions. Defaults to `auto`.\n     *\n     * - `auto`: Use heuristics to pick between `resize` and `scale`.\n     *\n     * - `resize`: A software operation which changes the encoded image in memory before it\n     * gets decoded. This should be used instead of `scale` when the image is much larger\n     * than the view.\n     *\n     * - `scale`: The image gets drawn downscaled or upscaled. Compared to `resize`, `scale` is\n     * faster (usually hardware accelerated) and produces higher quality images. This\n     * should be used if the image is smaller than the view. It should also be used if the\n     * image is slightly bigger than the view.\n     *\n     * More details about `resize` and `scale` can be found at http://frescolib.org/docs/resizing-rotating.html.\n     *\n     * @platform android\n     */\n    resizeMethod: PropTypes.oneOf(['auto', 'resize', 'scale']),\n    /**\n     * Determines how to resize the image when the frame doesn't match the raw\n     * image dimensions.\n     *\n     * - `cover`: Scale the image uniformly (maintain the image's aspect ratio)\n     * so that both dimensions (width and height) of the image will be equal\n     * to or larger than the corresponding dimension of the view (minus padding).\n     *\n     * - `contain`: Scale the image uniformly (maintain the image's aspect ratio)\n     * so that both dimensions (width and height) of the image will be equal to\n     * or less than the corresponding dimension of the view (minus padding).\n     *\n     * - `stretch`: Scale width and height independently, This may change the\n     * aspect ratio of the src.\n     *\n     * - `repeat`: Repeat the image to cover the frame of the view. The\n     * image will keep it's size and aspect ratio. (iOS only)\n     */\n    resizeMode: PropTypes.oneOf(['cover', 'contain', 'stretch', 'repeat', 'center']),\n    /**\n     * A unique identifier for this element to be used in UI Automation\n     * testing scripts.\n     */\n    testID: PropTypes.string,\n    /**\n     * Invoked on mount and layout changes with\n     * `{nativeEvent: {layout: {x, y, width, height}}}`.\n     */\n    onLayout: PropTypes.func,\n    /**\n     * Invoked on load start.\n     *\n     * e.g., `onLoadStart={(e) => this.setState({loading: true})}`\n     */\n    onLoadStart: PropTypes.func,\n    /**\n     * Invoked on download progress with `{nativeEvent: {loaded, total}}`.\n     * @platform ios\n     */\n    onProgress: PropTypes.func,\n    /**\n     * Invoked on load error with `{nativeEvent: {error}}`.\n     */\n    onError: PropTypes.func,\n    /**\n     * Invoked when a partial load of the image is complete. The definition of\n     * what constitutes a \"partial load\" is loader specific though this is meant\n     * for progressive JPEG loads.\n     * @platform ios\n     */\n    onPartialLoad: PropTypes.func,\n    /**\n     * Invoked when load completes successfully.\n     */\n    onLoad: PropTypes.func,\n    /**\n     * Invoked when load either succeeds or fails.\n     */\n    onLoadEnd: PropTypes.func,\n  },\n\n  statics: {\n    resizeMode: ImageResizeMode,\n    /**\n     * Retrieve the width and height (in pixels) of an image prior to displaying it.\n     * This method can fail if the image cannot be found, or fails to download.\n     *\n     * In order to retrieve the image dimensions, the image may first need to be\n     * loaded or downloaded, after which it will be cached. This means that in\n     * principle you could use this method to preload images, however it is not\n     * optimized for that purpose, and may in future be implemented in a way that\n     * does not fully load/download the image data. A proper, supported way to\n     * preload images will be provided as a separate API.\n     *\n     * Does not work for static image resources.\n     *\n     * @param uri The location of the image.\n     * @param success The function that will be called if the image was successfully found and width\n     * and height retrieved.\n     * @param failure The function that will be called if there was an error, such as failing to\n     * to retrieve the image.\n     *\n     * @returns void\n     *\n     * @platform ios\n     */\n    getSize: function(\n      uri: string,\n      success: (width: number, height: number) => void,\n      failure?: (error: any) => void,\n    ) {\n      ImageViewManager.getSize(uri, success, failure || function() {\n        console.warn('Failed to get size for image: ' + uri);\n      });\n    },\n    /**\n     * Prefetches a remote image for later use by downloading it to the disk\n     * cache\n     *\n     * @param url The remote location of the image.\n     *\n     * @return The prefetched image.\n     */\n    prefetch(url: string) {\n      return ImageViewManager.prefetchImage(url);\n    },\n    /**\n     * Resolves an asset reference into an object which has the properties `uri`, `width`,\n     * and `height`. The input may either be a number (opaque type returned by\n     * require('./foo.png')) or an `ImageSource` like { uri: '<http location || file path>' }\n     */\n    resolveAssetSource: resolveAssetSource,\n  },\n\n  mixins: [NativeMethodsMixin],\n\n  /**\n   * `NativeMethodsMixin` will look for this when invoking `setNativeProps`. We\n   * make `this` look like an actual native component class.\n   */\n  viewConfig: {\n    uiViewClassName: 'UIView',\n    validAttributes: ReactNativeViewAttributes.UIView\n  },\n\n  render: function() {\n    const source = resolveAssetSource(this.props.source) || { uri: undefined, width: undefined, height: undefined };\n\n    let sources;\n    let style;\n    if (Array.isArray(source)) {\n      style = flattenStyle([styles.base, this.props.style]) || {};\n      sources = source;\n    } else {\n      const {width, height, uri} = source;\n      style = flattenStyle([{width, height}, styles.base, this.props.style]) || {};\n      sources = [source];\n\n      if (uri === '') {\n        console.warn('source.uri should not be an empty string');\n      }\n    }\n\n    const resizeMode = this.props.resizeMode || (style || {}).resizeMode || 'cover'; // Workaround for flow bug t7737108\n    const tintColor = (style || {}).tintColor; // Workaround for flow bug t7737108\n\n    if (this.props.src) {\n      console.warn('The <Image> component requires a `source` property rather than `src`.');\n    }\n\n    return (\n      <RCTImageView\n        {...this.props}\n        style={style}\n        resizeMode={resizeMode}\n        tintColor={tintColor}\n        source={sources}\n      />\n    );\n  },\n});\n\nconst styles = StyleSheet.create({\n  base: {\n    overflow: 'hidden',\n  },\n});\n\nconst RCTImageView = requireNativeComponent('RCTImageView', Image);\n\nmodule.exports = Image;\n"]}