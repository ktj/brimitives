{"version":3,"sources":["node_modules/react-native/Libraries/Animated/src/AnimatedImplementation.js"],"names":["InteractionManager","require","Interpolation","NativeAnimatedHelper","React","ReactNative","Set","SpringConfig","ViewStylePropTypes","flattenStyle","invariant","requestAnimationFrame","NativeAnimatedAPI","API","warnedMissingNativeAnimated","shouldUseNativeDriver","config","useNativeDriver","isNativeAnimatedAvailable","console","warn","Animated","__isNative","__nativeTag","dropAnimatedNode","undefined","__getValue","child","Error","assertNativeAnimatedModule","nativeTag","generateNewNodeTag","createAnimatedNode","__getNativeConfig","Animation","fromValue","onUpdate","onEnd","previousAnimation","animatedValue","__nativeId","stopAnimation","result","__onEnd","__makeNative","generateNewAnimationId","startAnimatingNode","__getNativeTag","__getNativeAnimationConfig","__debouncedOnEnd","bind","AnimatedWithChildren","_children","connectAnimatedNodes","length","__attach","push","index","indexOf","disconnectAnimatedNodes","splice","__detach","_flush","rootNode","animatedStyles","findAnimatedStyles","node","update","add","__getChildren","forEach","animatedStyle","_easeInOut","easeInOut","Easing","inOut","ease","TimingAnimation","_toValue","toValue","_easing","easing","_duration","duration","_delay","delay","__iterations","iterations","__isInteraction","isInteraction","_useNativeDriver","frameDuration","frames","dt","type","__active","_fromValue","_onUpdate","start","finished","_startTime","Date","now","__startNativeAnimation","_animationFrame","_timeout","setTimeout","clearTimeout","global","cancelAnimationFrame","DecayAnimation","_deceleration","deceleration","_velocity","velocity","_lastValue","value","Math","exp","abs","withDefault","defaultValue","SpringAnimation","_overshootClamping","overshootClamping","_restDisplacementThreshold","restDisplacementThreshold","_restSpeedThreshold","restSpeedThreshold","_initialVelocity","_lastVelocity","springConfig","bounciness","speed","tension","friction","fromBouncinessAndSpeed","fromOrigamiTensionAndFriction","_tension","_friction","initialVelocity","_startPosition","_lastPosition","_lastTime","internalState","getInternalState","lastPosition","lastVelocity","lastTime","position","tempPosition","tempVelocity","MAX_STEPS","TIMESTEP_MSEC","numSteps","floor","i","step","aVelocity","aAcceleration","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","dxdt","dvdt","isOvershooting","isVelocity","isDisplacement","_uniqueId","AnimatedValue","_startingValue","_value","_offset","_animation","_listeners","Object","keys","_startListeningToNativeValueUpdates","stop","_updateValue","setAnimatedNodeValue","offset","setAnimatedNodeOffset","flattenAnimatedNodeOffset","extractAnimatedNodeOffset","callback","id","String","_stopListeningForNativeValueUpdates","__nativeAnimatedValueListener","startListeningToAnimatedNodeValue","nativeEventEmitter","addListener","data","tag","remove","stopListeningToAnimatedNodeValue","stopTracking","AnimatedInterpolation","animation","handle","createInteractionHandle","clearInteractionHandle","_tracking","tracking","flush","key","AnimatedValueXY","valueIn","x","y","setValue","setOffset","flattenOffset","extractOffset","resetAnimation","jointCallback","number","removeListener","removeAllListeners","left","top","translateX","translateY","parent","_parent","_config","_interpolation","create","parentValue","__addChild","__removeChild","range","map","test","degrees","parseFloat","radians","PI","__DEV__","validateInterpolation","inputRange","outputRange","__transformDataType","extrapolateLeft","extrapolate","extrapolateRight","AnimatedAddition","a","b","_a","_b","input","AnimatedDivision","error","AnimatedMultiplication","AnimatedModulo","modulus","_modulus","AnimatedDiffClamp","min","max","_min","_max","diff","AnimatedTransform","transforms","_transforms","transform","__getAnimatedValue","transConfigs","property","nodeTag","validateTransform","AnimatedStyle","style","_style","updatedStyle","Array","isArray","__walkStyleAndGetValues","__walkStyleAndGetAnimatedValues","styleConfig","styleKey","validateStyles","AnimatedProps","props","_props","_callback","AnimatedEvent","__getHandler","_animatedView","__disconnectAnimatedView","__connectAnimatedView","animatedView","nativeViewTag","findNodeHandle","connectAnimatedNodeToView","disconnectAnimatedNodeFromView","propsConfig","propKey","createAnimatedComponent","Component","AnimatedComponent","_eventDetachers","_setComponentRef","_propsAnimated","_detachNativeEvents","_component","setNativeProps","_attachProps","setNativeView","_attachNativeEvents","scrollableNode","getScrollableNode","prop","nextProps","oldPropsAnimated","forceUpdate","newProps","prevProps","_prevComponent","collapsable","c","propTypes","__propTypesSecretDontUseThesePlease","propName","componentName","AnimatedTracking","animationClass","animationConfig","_animationClass","_animationConfig","animate","divide","multiply","modulo","diffClamp","_combineCallbacks","onComplete","maybeVectorAnim","anim","configX","configY","aX","aY","parallel","stopTogether","spring","configuration","singleValue","singleConfig","track","reset","_startNativeLoop","_isUsingNativeDriver","timing","decay","sequence","animations","current","idx","doneCount","hasEnded","cb","endResult","time","stagger","loop","isFinished","iterationsSoFar","restart","attachNativeEvent","viewRef","eventName","argMapping","eventMappings","traverse","path","nativeEventPath","animatedValueTag","concat","nativeEvent","viewTag","mapping","addAnimatedEventToView","detach","removeAnimatedEventFromView","forkEvent","event","listener","__addListener","unforkEvent","__removeListener","_argMapping","_callListeners","_attachedEvent","_validateMapping","filter","args","recMapping","recEvt","mappingKey","animatedEvent","module","exports","Value","ValueXY","__PropsOnlyForTests"],"mappings":"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","file":"AnimatedImplementation.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule AnimatedImplementation\n * @flow\n * @preventMunge\n */\n'use strict';\n\nvar InteractionManager = require('InteractionManager');\nvar Interpolation = require('Interpolation');\nvar NativeAnimatedHelper = require('NativeAnimatedHelper');\nvar React = require('React');\nvar ReactNative = require('ReactNative');\nvar Set = require('Set');\nvar SpringConfig = require('SpringConfig');\nvar ViewStylePropTypes = require('ViewStylePropTypes');\n\nvar flattenStyle = require('flattenStyle');\nvar invariant = require('fbjs/lib/invariant');\nvar requestAnimationFrame = require('fbjs/lib/requestAnimationFrame');\n\nimport type { InterpolationConfigType } from 'Interpolation';\n\ntype EndResult = {finished: bool};\ntype EndCallback = (result: EndResult) => void;\n\nvar NativeAnimatedAPI = NativeAnimatedHelper.API;\n\nvar warnedMissingNativeAnimated = false;\n\nfunction shouldUseNativeDriver(config: AnimationConfig | EventConfig): boolean {\n  if (config.useNativeDriver &&\n      !NativeAnimatedHelper.isNativeAnimatedAvailable()) {\n    if (!warnedMissingNativeAnimated) {\n      console.warn(\n        'Animated: `useNativeDriver` is not supported because the native ' +\n        'animated module is missing. Falling back to JS-based animation. To ' +\n        'resolve this, add `RCTAnimation` module to this app, or remove ' +\n        '`useNativeDriver`. ' +\n        'More info: https://github.com/facebook/react-native/issues/11094#issuecomment-263240420'\n      );\n      warnedMissingNativeAnimated = true;\n    }\n    return false;\n  }\n\n  return config.useNativeDriver || false;\n}\n\n// Note(vjeux): this would be better as an interface but flow doesn't\n// support them yet\nclass Animated {\n  __attach(): void {}\n  __detach(): void {\n    if (this.__isNative && this.__nativeTag != null) {\n      NativeAnimatedAPI.dropAnimatedNode(this.__nativeTag);\n      this.__nativeTag = undefined;\n    }\n  }\n  __getValue(): any {}\n  __getAnimatedValue(): any { return this.__getValue(); }\n  __addChild(child: Animated) {}\n  __removeChild(child: Animated) {}\n  __getChildren(): Array<Animated> { return []; }\n\n  /* Methods and props used by native Animated impl */\n  __isNative: bool;\n  __nativeTag: ?number;\n  __makeNative() {\n    if (!this.__isNative) {\n      throw new Error('This node cannot be made a \"native\" animated node');\n    }\n  }\n  __getNativeTag(): ?number {\n    NativeAnimatedHelper.assertNativeAnimatedModule();\n    invariant(this.__isNative, 'Attempt to get native tag from node not marked as \"native\"');\n    if (this.__nativeTag == null) {\n      var nativeTag: ?number = NativeAnimatedHelper.generateNewNodeTag();\n      NativeAnimatedAPI.createAnimatedNode(nativeTag, this.__getNativeConfig());\n      this.__nativeTag = nativeTag;\n    }\n    return this.__nativeTag;\n  }\n  __getNativeConfig(): Object {\n    throw new Error('This JS animated node type cannot be used as native animated node');\n  }\n  toJSON(): any { return this.__getValue(); }\n}\n\ntype AnimationConfig = {\n  isInteraction?: bool,\n  useNativeDriver?: bool,\n  onComplete?: ?EndCallback,\n  iterations?: number,\n};\n\n// Important note: start() and stop() will only be called at most once.\n// Once an animation has been stopped or finished its course, it will\n// not be reused.\nclass Animation {\n  __active: bool;\n  __isInteraction: bool;\n  __nativeId: number;\n  __onEnd: ?EndCallback;\n  __iterations: number;\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {}\n  stop(): void {\n    if (this.__nativeId) {\n      NativeAnimatedAPI.stopAnimation(this.__nativeId);\n    }\n  }\n  __getNativeAnimationConfig(): any {\n    // Subclasses that have corresponding animation implementation done in native\n    // should override this method\n    throw new Error('This animation type cannot be offloaded to native');\n  }\n  // Helper function for subclasses to make sure onEnd is only called once.\n  __debouncedOnEnd(result: EndResult): void {\n    var onEnd = this.__onEnd;\n    this.__onEnd = null;\n    onEnd && onEnd(result);\n  }\n  __startNativeAnimation(animatedValue: AnimatedValue): void {\n    animatedValue.__makeNative();\n    this.__nativeId = NativeAnimatedHelper.generateNewAnimationId();\n    NativeAnimatedAPI.startAnimatingNode(\n      this.__nativeId,\n      animatedValue.__getNativeTag(),\n      this.__getNativeAnimationConfig(),\n      this.__debouncedOnEnd.bind(this)\n    );\n  }\n}\n\nclass AnimatedWithChildren extends Animated {\n  _children: Array<Animated>;\n\n  constructor() {\n    super();\n    this._children = [];\n  }\n\n  __makeNative() {\n    if (!this.__isNative) {\n      this.__isNative = true;\n      for (var child of this._children) {\n        child.__makeNative();\n        NativeAnimatedAPI.connectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n      }\n    }\n  }\n\n  __addChild(child: Animated): void {\n    if (this._children.length === 0) {\n      this.__attach();\n    }\n    this._children.push(child);\n    if (this.__isNative) {\n      // Only accept \"native\" animated nodes as children\n      child.__makeNative();\n      NativeAnimatedAPI.connectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n    }\n  }\n\n  __removeChild(child: Animated): void {\n    var index = this._children.indexOf(child);\n    if (index === -1) {\n      console.warn('Trying to remove a child that doesn\\'t exist');\n      return;\n    }\n    if (this.__isNative && child.__isNative) {\n      NativeAnimatedAPI.disconnectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n    }\n    this._children.splice(index, 1);\n    if (this._children.length === 0) {\n      this.__detach();\n    }\n  }\n\n  __getChildren(): Array<Animated> {\n    return this._children;\n  }\n}\n\n/**\n * Animated works by building a directed acyclic graph of dependencies\n * transparently when you render your Animated components.\n *\n *               new Animated.Value(0)\n *     .interpolate()        .interpolate()    new Animated.Value(1)\n *         opacity               translateY      scale\n *          style                         transform\n *         View#234                         style\n *                                         View#123\n *\n * A) Top Down phase\n * When an Animated.Value is updated, we recursively go down through this\n * graph in order to find leaf nodes: the views that we flag as needing\n * an update.\n *\n * B) Bottom Up phase\n * When a view is flagged as needing an update, we recursively go back up\n * in order to build the new value that it needs. The reason why we need\n * this two-phases process is to deal with composite props such as\n * transform which can receive values from multiple parents.\n */\nfunction _flush(rootNode: AnimatedValue): void {\n  var animatedStyles = new Set();\n  function findAnimatedStyles(node) {\n    if (typeof node.update === 'function') {\n      animatedStyles.add(node);\n    } else {\n      node.__getChildren().forEach(findAnimatedStyles);\n    }\n  }\n  findAnimatedStyles(rootNode);\n  /* $FlowFixMe */\n  animatedStyles.forEach(animatedStyle => animatedStyle.update());\n}\n\ntype TimingAnimationConfig = AnimationConfig & {\n  toValue: number | AnimatedValue | {x: number, y: number} | AnimatedValueXY,\n  easing?: (value: number) => number,\n  duration?: number,\n  delay?: number,\n};\n\ntype TimingAnimationConfigSingle = AnimationConfig & {\n  toValue: number | AnimatedValue,\n  easing?: (value: number) => number,\n  duration?: number,\n  delay?: number,\n};\n\nlet _easeInOut;\nfunction easeInOut() {\n  if (!_easeInOut) {\n    const Easing = require('Easing');\n    _easeInOut = Easing.inOut(Easing.ease);\n  }\n  return _easeInOut;\n}\n\nclass TimingAnimation extends Animation {\n  _startTime: number;\n  _fromValue: number;\n  _toValue: any;\n  _duration: number;\n  _delay: number;\n  _easing: (value: number) => number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _timeout: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: TimingAnimationConfigSingle,\n  ) {\n    super();\n    this._toValue = config.toValue;\n    this._easing = config.easing !== undefined ? config.easing : easeInOut();\n    this._duration = config.duration !== undefined ? config.duration : 500;\n    this._delay = config.delay !== undefined ? config.delay : 0;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this._useNativeDriver = shouldUseNativeDriver(config);\n  }\n\n  __getNativeAnimationConfig(): any {\n    var frameDuration = 1000.0 / 60.0;\n    var frames = [];\n    for (var dt = 0.0; dt < this._duration; dt += frameDuration) {\n      frames.push(this._easing(dt / this._duration));\n    }\n    frames.push(this._easing(1));\n    return {\n      type: 'frames',\n      frames,\n      toValue: this._toValue,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {\n    this.__active = true;\n    this._fromValue = fromValue;\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n\n    var start = () => {\n      // Animations that sometimes have 0 duration and sometimes do not\n      // still need to use the native driver when duration is 0 so as to\n      // not cause intermixed JS and native animations.\n      if (this._duration === 0 && !this._useNativeDriver) {\n        this._onUpdate(this._toValue);\n        this.__debouncedOnEnd({finished: true});\n      } else {\n        this._startTime = Date.now();\n        if (this._useNativeDriver) {\n          this.__startNativeAnimation(animatedValue);\n        } else {\n          this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n      }\n    };\n    if (this._delay) {\n      this._timeout = setTimeout(start, this._delay);\n    } else {\n      start();\n    }\n  }\n\n  onUpdate(): void {\n    var now = Date.now();\n    if (now >= this._startTime + this._duration) {\n      if (this._duration === 0) {\n        this._onUpdate(this._toValue);\n      } else {\n        this._onUpdate(\n          this._fromValue + this._easing(1) * (this._toValue - this._fromValue)\n        );\n      }\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n\n    this._onUpdate(\n      this._fromValue +\n        this._easing((now - this._startTime) / this._duration) *\n        (this._toValue - this._fromValue)\n    );\n    if (this.__active) {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    clearTimeout(this._timeout);\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype DecayAnimationConfig = AnimationConfig & {\n  velocity: number | {x: number, y: number},\n  deceleration?: number,\n};\n\ntype DecayAnimationConfigSingle = AnimationConfig & {\n  velocity: number,\n  deceleration?: number,\n};\n\nclass DecayAnimation extends Animation {\n  _startTime: number;\n  _lastValue: number;\n  _fromValue: number;\n  _deceleration: number;\n  _velocity: number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: DecayAnimationConfigSingle,\n  ) {\n    super();\n    this._deceleration = config.deceleration !== undefined ? config.deceleration : 0.998;\n    this._velocity = config.velocity;\n    this._useNativeDriver = shouldUseNativeDriver(config);\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n  }\n\n  __getNativeAnimationConfig() {\n    return {\n      type: 'decay',\n      deceleration: this._deceleration,\n      velocity: this._velocity,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue,\n  ): void {\n    this.__active = true;\n    this._lastValue = fromValue;\n    this._fromValue = fromValue;\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n    this._startTime = Date.now();\n    if (this._useNativeDriver) {\n      this.__startNativeAnimation(animatedValue);\n    } else {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  onUpdate(): void {\n    var now = Date.now();\n\n    var value = this._fromValue +\n      (this._velocity / (1 - this._deceleration)) *\n      (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n    this._onUpdate(value);\n\n    if (Math.abs(this._lastValue - value) < 0.1) {\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n\n    this._lastValue = value;\n    if (this.__active) {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype SpringAnimationConfig = AnimationConfig & {\n  toValue: number | AnimatedValue | {x: number, y: number} | AnimatedValueXY,\n  overshootClamping?: bool,\n  restDisplacementThreshold?: number,\n  restSpeedThreshold?: number,\n  velocity?: number | {x: number, y: number},\n  bounciness?: number,\n  speed?: number,\n  tension?: number,\n  friction?: number,\n  delay?: number,\n};\n\ntype SpringAnimationConfigSingle = AnimationConfig & {\n  toValue: number | AnimatedValue,\n  overshootClamping?: bool,\n  restDisplacementThreshold?: number,\n  restSpeedThreshold?: number,\n  velocity?: number,\n  bounciness?: number,\n  speed?: number,\n  tension?: number,\n  friction?: number,\n  delay?: number,\n};\n\nfunction withDefault<T>(value: ?T, defaultValue: T): T {\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n  return value;\n}\n\nclass SpringAnimation extends Animation {\n  _overshootClamping: bool;\n  _restDisplacementThreshold: number;\n  _restSpeedThreshold: number;\n  _initialVelocity: ?number;\n  _lastVelocity: number;\n  _startPosition: number;\n  _lastPosition: number;\n  _fromValue: number;\n  _toValue: any;\n  _tension: number;\n  _friction: number;\n  _delay: number;\n  _timeout: any;\n  _lastTime: number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: SpringAnimationConfigSingle,\n  ) {\n    super();\n\n    this._overshootClamping = withDefault(config.overshootClamping, false);\n    this._restDisplacementThreshold = withDefault(config.restDisplacementThreshold, 0.001);\n    this._restSpeedThreshold = withDefault(config.restSpeedThreshold, 0.001);\n    this._initialVelocity = config.velocity;\n    this._lastVelocity = withDefault(config.velocity, 0);\n    this._toValue = config.toValue;\n    this._delay = withDefault(config.delay, 0);\n    this._useNativeDriver = shouldUseNativeDriver(config);\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n\n    var springConfig;\n    if (config.bounciness !== undefined || config.speed !== undefined) {\n      invariant(\n        config.tension === undefined && config.friction === undefined,\n        'You can only define bounciness/speed or tension/friction but not both',\n      );\n      springConfig = SpringConfig.fromBouncinessAndSpeed(\n        withDefault(config.bounciness, 8),\n        withDefault(config.speed, 12),\n      );\n    } else {\n      springConfig = SpringConfig.fromOrigamiTensionAndFriction(\n        withDefault(config.tension, 40),\n        withDefault(config.friction, 7),\n      );\n    }\n    this._tension = springConfig.tension;\n    this._friction = springConfig.friction;\n  }\n\n  __getNativeAnimationConfig() {\n    return {\n      type: 'spring',\n      overshootClamping: this._overshootClamping,\n      restDisplacementThreshold: this._restDisplacementThreshold,\n      restSpeedThreshold: this._restSpeedThreshold,\n      tension: this._tension,\n      friction: this._friction,\n      initialVelocity: withDefault(this._initialVelocity, this._lastVelocity),\n      toValue: this._toValue,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {\n    this.__active = true;\n    this._startPosition = fromValue;\n    this._lastPosition = this._startPosition;\n\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n    this._lastTime = Date.now();\n\n    if (previousAnimation instanceof SpringAnimation) {\n      var internalState = previousAnimation.getInternalState();\n      this._lastPosition = internalState.lastPosition;\n      this._lastVelocity = internalState.lastVelocity;\n      this._lastTime = internalState.lastTime;\n    }\n    if (this._initialVelocity !== undefined &&\n        this._initialVelocity !== null) {\n      this._lastVelocity = this._initialVelocity;\n    }\n\n    var start = () => {\n      if (this._useNativeDriver) {\n        this.__startNativeAnimation(animatedValue);\n      } else {\n        this.onUpdate();\n      }\n    };\n\n    //  If this._delay is more than 0, we start after the timeout.\n    if (this._delay) {\n      this._timeout = setTimeout(start, this._delay);\n    } else {\n      start();\n    }\n  }\n\n  getInternalState(): Object {\n    return {\n      lastPosition: this._lastPosition,\n      lastVelocity: this._lastVelocity,\n      lastTime: this._lastTime,\n    };\n  }\n\n  onUpdate(): void {\n    var position = this._lastPosition;\n    var velocity = this._lastVelocity;\n\n    var tempPosition = this._lastPosition;\n    var tempVelocity = this._lastVelocity;\n\n    // If for some reason we lost a lot of frames (e.g. process large payload or\n    // stopped in the debugger), we only advance by 4 frames worth of\n    // computation and will continue on the next frame. It's better to have it\n    // running at faster speed than jumping to the end.\n    var MAX_STEPS = 64;\n    var now = Date.now();\n    if (now > this._lastTime + MAX_STEPS) {\n      now = this._lastTime + MAX_STEPS;\n    }\n\n    // We are using a fixed time step and a maximum number of iterations.\n    // The following post provides a lot of thoughts into how to build this\n    // loop: http://gafferongames.com/game-physics/fix-your-timestep/\n    var TIMESTEP_MSEC = 1;\n    var numSteps = Math.floor((now - this._lastTime) / TIMESTEP_MSEC);\n\n    for (var i = 0; i < numSteps; ++i) {\n      // Velocity is based on seconds instead of milliseconds\n      var step = TIMESTEP_MSEC / 1000;\n\n      // This is using RK4. A good blog post to understand how it works:\n      // http://gafferongames.com/game-physics/integration-basics/\n      var aVelocity = velocity;\n      var aAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      var tempPosition = position + aVelocity * step / 2;\n      var tempVelocity = velocity + aAcceleration * step / 2;\n\n      var bVelocity = tempVelocity;\n      var bAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + bVelocity * step / 2;\n      tempVelocity = velocity + bAcceleration * step / 2;\n\n      var cVelocity = tempVelocity;\n      var cAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + cVelocity * step / 2;\n      tempVelocity = velocity + cAcceleration * step / 2;\n\n      var dVelocity = tempVelocity;\n      var dAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + cVelocity * step / 2;\n      tempVelocity = velocity + cAcceleration * step / 2;\n\n      var dxdt = (aVelocity + 2 * (bVelocity + cVelocity) + dVelocity) / 6;\n      var dvdt = (aAcceleration + 2 * (bAcceleration + cAcceleration) + dAcceleration) / 6;\n\n      position += dxdt * step;\n      velocity += dvdt * step;\n    }\n\n    this._lastTime = now;\n    this._lastPosition = position;\n    this._lastVelocity = velocity;\n\n    this._onUpdate(position);\n    if (!this.__active) { // a listener might have stopped us in _onUpdate\n      return;\n    }\n\n    // Conditions for stopping the spring animation\n    var isOvershooting = false;\n    if (this._overshootClamping && this._tension !== 0) {\n      if (this._startPosition < this._toValue) {\n        isOvershooting = position > this._toValue;\n      } else {\n        isOvershooting = position < this._toValue;\n      }\n    }\n    var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;\n    var isDisplacement = true;\n    if (this._tension !== 0) {\n      isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;\n    }\n\n    if (isOvershooting || (isVelocity && isDisplacement)) {\n      if (this._tension !== 0) {\n        // Ensure that we end up with a round value\n        this._onUpdate(this._toValue);\n      }\n\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n    this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    clearTimeout(this._timeout);\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype ValueListenerCallback = (state: {value: number}) => void;\n\nvar _uniqueId = 1;\n\n/**\n * Standard value for driving animations.  One `Animated.Value` can drive\n * multiple properties in a synchronized fashion, but can only be driven by one\n * mechanism at a time.  Using a new mechanism (e.g. starting a new animation,\n * or calling `setValue`) will stop any previous ones.\n */\nclass AnimatedValue extends AnimatedWithChildren {\n  _value: number;\n  _startingValue: number;\n  _offset: number;\n  _animation: ?Animation;\n  _tracking: ?Animated;\n  _listeners: {[key: string]: ValueListenerCallback};\n  __nativeAnimatedValueListener: ?any;\n\n  constructor(value: number) {\n    super();\n    this._startingValue = this._value = value;\n    this._offset = 0;\n    this._animation = null;\n    this._listeners = {};\n  }\n\n  __detach() {\n    this.stopAnimation();\n    super.__detach();\n  }\n\n  __getValue(): number {\n    return this._value + this._offset;\n  }\n\n  __makeNative() {\n    super.__makeNative();\n\n    if (Object.keys(this._listeners).length) {\n      this._startListeningToNativeValueUpdates();\n    }\n  }\n\n  /**\n   * Directly set the value.  This will stop any animations running on the value\n   * and update all the bound properties.\n   */\n  setValue(value: number): void {\n    if (this._animation) {\n      this._animation.stop();\n      this._animation = null;\n    }\n    this._updateValue(\n      value,\n      !this.__isNative /* don't perform a flush for natively driven values */);\n    if (this.__isNative) {\n      NativeAnimatedAPI.setAnimatedNodeValue(this.__getNativeTag(), value);\n    }\n  }\n\n  /**\n   * Sets an offset that is applied on top of whatever value is set, whether via\n   * `setValue`, an animation, or `Animated.event`.  Useful for compensating\n   * things like the start of a pan gesture.\n   */\n  setOffset(offset: number): void {\n    this._offset = offset;\n    if (this.__isNative) {\n      NativeAnimatedAPI.setAnimatedNodeOffset(this.__getNativeTag(), offset);\n    }\n  }\n\n  /**\n   * Merges the offset value into the base value and resets the offset to zero.\n   * The final output of the value is unchanged.\n   */\n  flattenOffset(): void {\n    this._value += this._offset;\n    this._offset = 0;\n    if (this.__isNative) {\n      NativeAnimatedAPI.flattenAnimatedNodeOffset(this.__getNativeTag());\n    }\n  }\n\n  /**\n   * Sets the offset value to the base value, and resets the base value to zero.\n   * The final output of the value is unchanged.\n   */\n  extractOffset(): void {\n    this._offset += this._value;\n    this._value = 0;\n    if (this.__isNative) {\n      NativeAnimatedAPI.extractAnimatedNodeOffset(this.__getNativeTag());\n    }\n  }\n\n  /**\n   * Adds an asynchronous listener to the value so you can observe updates from\n   * animations.  This is useful because there is no way to\n   * synchronously read the value because it might be driven natively.\n   */\n  addListener(callback: ValueListenerCallback): string {\n    var id = String(_uniqueId++);\n    this._listeners[id] = callback;\n    if (this.__isNative) {\n      this._startListeningToNativeValueUpdates();\n    }\n    return id;\n  }\n\n  removeListener(id: string): void {\n    delete this._listeners[id];\n    if (this.__isNative && Object.keys(this._listeners).length === 0) {\n      this._stopListeningForNativeValueUpdates();\n    }\n  }\n\n  removeAllListeners(): void {\n    this._listeners = {};\n    if (this.__isNative) {\n      this._stopListeningForNativeValueUpdates();\n    }\n  }\n\n  _startListeningToNativeValueUpdates() {\n    if (this.__nativeAnimatedValueListener) {\n      return;\n    }\n\n    NativeAnimatedAPI.startListeningToAnimatedNodeValue(this.__getNativeTag());\n    this.__nativeAnimatedValueListener = NativeAnimatedHelper.nativeEventEmitter.addListener(\n      'onAnimatedValueUpdate',\n      (data) => {\n        if (data.tag !== this.__getNativeTag()) {\n          return;\n        }\n        this._updateValue(data.value, false /* flush */);\n      }\n    );\n  }\n\n  _stopListeningForNativeValueUpdates() {\n    if (!this.__nativeAnimatedValueListener) {\n      return;\n    }\n\n    this.__nativeAnimatedValueListener.remove();\n    this.__nativeAnimatedValueListener = null;\n    NativeAnimatedAPI.stopListeningToAnimatedNodeValue(this.__getNativeTag());\n  }\n\n  /**\n   * Stops any running animation or tracking.  `callback` is invoked with the\n   * final value after stopping the animation, which is useful for updating\n   * state to match the animation position with layout.\n   */\n  stopAnimation(callback?: ?(value: number) => void): void {\n    this.stopTracking();\n    this._animation && this._animation.stop();\n    this._animation = null;\n    callback && callback(this.__getValue());\n  }\n\n  /**\n  * Stops any animation and resets the value to its original\n  */\n  resetAnimation(callback?: ?(value: number) => void): void {\n    this.stopAnimation(callback);\n    this._value = this._startingValue;\n  }\n\n  /**\n   * Interpolates the value before updating the property, e.g. mapping 0-1 to\n   * 0-10.\n   */\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  /**\n   * Typically only used internally, but could be used by a custom Animation\n   * class.\n   */\n  animate(animation: Animation, callback: ?EndCallback): void {\n    var handle = null;\n    if (animation.__isInteraction) {\n      handle = InteractionManager.createInteractionHandle();\n    }\n    var previousAnimation = this._animation;\n    this._animation && this._animation.stop();\n    this._animation = animation;\n    animation.start(\n      this._value,\n      (value) => {\n        // Natively driven animations will never call into that callback, therefore we can always\n        // pass flush = true to allow the updated value to propagate to native with setNativeProps\n        this._updateValue(value, true /* flush */);\n      },\n      (result) => {\n        this._animation = null;\n        if (handle !== null) {\n          InteractionManager.clearInteractionHandle(handle);\n        }\n        callback && callback(result);\n      },\n      previousAnimation,\n      this\n    );\n  }\n\n  /**\n   * Typically only used internally.\n   */\n  stopTracking(): void {\n    this._tracking && this._tracking.__detach();\n    this._tracking = null;\n  }\n\n  /**\n   * Typically only used internally.\n   */\n  track(tracking: Animated): void {\n    this.stopTracking();\n    this._tracking = tracking;\n  }\n\n  _updateValue(value: number, flush: bool): void {\n    this._value = value;\n    if (flush) {\n      _flush(this);\n    }\n    for (var key in this._listeners) {\n      this._listeners[key]({value: this.__getValue()});\n    }\n  }\n\n  __getNativeConfig(): Object {\n    return {\n      type: 'value',\n      value: this._value,\n      offset: this._offset,\n    };\n  }\n}\n\ntype ValueXYListenerCallback = (value: {x: number, y: number}) => void;\n\n/**\n * 2D Value for driving 2D animations, such as pan gestures.  Almost identical\n * API to normal `Animated.Value`, but multiplexed.  Contains two regular\n * `Animated.Value`s under the hood.\n *\n * #### Example\n *\n *```javascript\n *  class DraggableView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        pan: new Animated.ValueXY(), // inits to zero\n *      };\n *      this.state.panResponder = PanResponder.create({\n *        onStartShouldSetPanResponder: () => true,\n *        onPanResponderMove: Animated.event([null, {\n *          dx: this.state.pan.x, // x,y are Animated.Value\n *          dy: this.state.pan.y,\n *        }]),\n *        onPanResponderRelease: () => {\n *          Animated.spring(\n *            this.state.pan,         // Auto-multiplexed\n *            {toValue: {x: 0, y: 0}} // Back to zero\n *          ).start();\n *        },\n *      });\n *    }\n *    render() {\n *      return (\n *        <Animated.View\n *          {...this.state.panResponder.panHandlers}\n *          style={this.state.pan.getLayout()}>\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n */\nclass AnimatedValueXY extends AnimatedWithChildren {\n  x: AnimatedValue;\n  y: AnimatedValue;\n  _listeners: {[key: string]: {x: string, y: string}};\n\n  constructor(valueIn?: ?{x: number | AnimatedValue, y: number | AnimatedValue}) {\n    super();\n    var value: any = valueIn || {x: 0, y: 0};  // @flowfixme: shouldn't need `: any`\n    if (typeof value.x === 'number' && typeof value.y === 'number') {\n      this.x = new AnimatedValue(value.x);\n      this.y = new AnimatedValue(value.y);\n    } else {\n      invariant(\n        value.x instanceof AnimatedValue &&\n        value.y instanceof AnimatedValue,\n        'AnimatedValueXY must be initalized with an object of numbers or ' +\n        'AnimatedValues.'\n      );\n      this.x = value.x;\n      this.y = value.y;\n    }\n    this._listeners = {};\n  }\n\n  setValue(value: {x: number, y: number}) {\n    this.x.setValue(value.x);\n    this.y.setValue(value.y);\n  }\n\n  setOffset(offset: {x: number, y: number}) {\n    this.x.setOffset(offset.x);\n    this.y.setOffset(offset.y);\n  }\n\n  flattenOffset(): void {\n    this.x.flattenOffset();\n    this.y.flattenOffset();\n  }\n\n  extractOffset(): void {\n    this.x.extractOffset();\n    this.y.extractOffset();\n  }\n\n  __getValue(): {x: number, y: number} {\n    return {\n      x: this.x.__getValue(),\n      y: this.y.__getValue(),\n    };\n  }\n\n  resetAnimation(callback?: (value: {x: number, y: number}) => void): void {\n    this.x.resetAnimation();\n    this.y.resetAnimation();\n    callback && callback(this.__getValue());\n  }\n\n  stopAnimation(callback?: (value: {x: number, y: number}) => void): void {\n    this.x.stopAnimation();\n    this.y.stopAnimation();\n    callback && callback(this.__getValue());\n  }\n\n  addListener(callback: ValueXYListenerCallback): string {\n    var id = String(_uniqueId++);\n    var jointCallback = ({value: number}) => {\n      callback(this.__getValue());\n    };\n    this._listeners[id] = {\n      x: this.x.addListener(jointCallback),\n      y: this.y.addListener(jointCallback),\n    };\n    return id;\n  }\n\n  removeListener(id: string): void {\n    this.x.removeListener(this._listeners[id].x);\n    this.y.removeListener(this._listeners[id].y);\n    delete this._listeners[id];\n  }\n\n  removeAllListeners(): void {\n    this.x.removeAllListeners();\n    this.y.removeAllListeners();\n    this._listeners = {};\n  }\n\n  /**\n   * Converts `{x, y}` into `{left, top}` for use in style, e.g.\n   *\n   *```javascript\n   *  style={this.state.anim.getLayout()}\n   *```\n   */\n  getLayout(): {[key: string]: AnimatedValue} {\n    return {\n      left: this.x,\n      top: this.y,\n    };\n  }\n\n  /**\n   * Converts `{x, y}` into a useable translation transform, e.g.\n   *\n   *```javascript\n   *  style={{\n   *    transform: this.state.anim.getTranslateTransform()\n   *  }}\n   *```\n   */\n  getTranslateTransform(): Array<{[key: string]: AnimatedValue}> {\n    return [\n      {translateX: this.x},\n      {translateY: this.y}\n    ];\n  }\n}\n\nclass AnimatedInterpolation extends AnimatedWithChildren {\n  _parent: Animated;\n  _config: InterpolationConfigType;\n  _interpolation: (input: number) => number | string;\n\n  constructor(parent: Animated, config: InterpolationConfigType) {\n    super();\n    this._parent = parent;\n    this._config = config;\n    this._interpolation = Interpolation.create(config);\n  }\n\n  __makeNative() {\n    this._parent.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number | string {\n    var parentValue: number = this._parent.__getValue();\n    invariant(\n      typeof parentValue === 'number',\n      'Cannot interpolate an input which is not a number.'\n    );\n    return this._interpolation(parentValue);\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._parent.__addChild(this);\n  }\n\n  __detach(): void {\n    this._parent.__removeChild(this);\n    super.__detach();\n  }\n\n  __transformDataType(range: Array<any>) {\n    // Change the string array type to number array\n    // So we can reuse the same logic in iOS and Android platform\n    return range.map(function (value) {\n      if (typeof value !== 'string') {\n        return value;\n      }\n      if (/deg$/.test(value)) {\n        const degrees = parseFloat(value) || 0;\n        const radians = degrees * Math.PI / 180.0;\n        return radians;\n      } else {\n        // Assume radians\n        return parseFloat(value) || 0;\n      }\n    });\n  }\n\n  __getNativeConfig(): any {\n    if (__DEV__) {\n      NativeAnimatedHelper.validateInterpolation(this._config);\n    }\n\n    return {\n      inputRange: this._config.inputRange,\n      // Only the `outputRange` can contain strings so we don't need to tranform `inputRange` here\n      outputRange: this.__transformDataType(this._config.outputRange),\n      extrapolateLeft: this._config.extrapolateLeft || this._config.extrapolate || 'extend',\n      extrapolateRight: this._config.extrapolateRight || this._config.extrapolate || 'extend',\n      type: 'interpolation',\n    };\n  }\n}\n\nclass AnimatedAddition extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return this._a.__getValue() + this._b.__getValue();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'addition',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedDivision extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    const a = this._a.__getValue();\n    const b = this._b.__getValue();\n    if (b === 0) {\n      console.error('Detected division by zero in AnimatedDivision');\n    }\n    return a / b;\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'division',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedMultiplication extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return this._a.__getValue() * this._b.__getValue();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'multiplication',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedModulo extends AnimatedWithChildren {\n  _a: Animated;\n  _modulus: number;\n\n  constructor(a: Animated, modulus: number) {\n    super();\n    this._a = a;\n    this._modulus = modulus;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return (this._a.__getValue() % this._modulus + this._modulus) % this._modulus;\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'modulus',\n      input: this._a.__getNativeTag(),\n      modulus: this._modulus,\n    };\n  }\n}\n\nclass AnimatedDiffClamp extends AnimatedWithChildren {\n  _a: Animated;\n  _min: number;\n  _max: number;\n  _value: number;\n  _lastValue: number;\n\n  constructor(a: Animated, min: number, max: number) {\n    super();\n\n    this._a = a;\n    this._min = min;\n    this._max = max;\n    this._value = this._lastValue = this._a.__getValue();\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    super.__makeNative();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __getValue(): number {\n    const value = this._a.__getValue();\n    const diff = value - this._lastValue;\n    this._lastValue = value;\n    this._value = Math.min(Math.max(this._value + diff, this._min), this._max);\n    return this._value;\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'diffclamp',\n      input: this._a.__getNativeTag(),\n      min: this._min,\n      max: this._max,\n    };\n  }\n}\n\nclass AnimatedTransform extends AnimatedWithChildren {\n  _transforms: Array<Object>;\n\n  constructor(transforms: Array<Object>) {\n    super();\n    this._transforms = transforms;\n  }\n\n  __makeNative() {\n    super.__makeNative();\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__makeNative();\n        }\n      }\n    });\n  }\n\n  __getValue(): Array<Object> {\n    return this._transforms.map(transform => {\n      var result = {};\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          result[key] = value.__getValue();\n        } else {\n          result[key] = value;\n        }\n      }\n      return result;\n    });\n  }\n\n  __getAnimatedValue(): Array<Object> {\n    return this._transforms.map(transform => {\n      var result = {};\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          result[key] = value.__getAnimatedValue();\n        } else {\n          // All transform components needed to recompose matrix\n          result[key] = value;\n        }\n      }\n      return result;\n    });\n  }\n\n  __attach(): void {\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    });\n  }\n\n  __detach(): void {\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    });\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    var transConfigs = [];\n\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          transConfigs.push({\n            type: 'animated',\n            property: key,\n            nodeTag: value.__getNativeTag(),\n          });\n        } else {\n          transConfigs.push({\n            type: 'static',\n            property: key,\n            value,\n          });\n        }\n      }\n    });\n\n    NativeAnimatedHelper.validateTransform(transConfigs);\n    return {\n      type: 'transform',\n      transforms: transConfigs,\n    };\n  }\n}\n\nclass AnimatedStyle extends AnimatedWithChildren {\n  _style: Object;\n\n  constructor(style: any) {\n    super();\n    style = flattenStyle(style) || {};\n    if (style.transform) {\n      style = {\n        ...style,\n        transform: new AnimatedTransform(style.transform),\n      };\n    }\n    this._style = style;\n  }\n\n  // Recursively get values for nested styles (like iOS's shadowOffset)\n  __walkStyleAndGetValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof Animated) {\n        if (!value.__isNative) {\n          // We cannot use value of natively driven nodes this way as the value we have access from\n          // JS may not be up to date.\n          updatedStyle[key] = value.__getValue();\n        }\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this.__walkStyleAndGetValues(value);\n      } else {\n        updatedStyle[key] = value;\n      }\n    }\n    return updatedStyle;\n  }\n\n  __getValue(): Object {\n    return this.__walkStyleAndGetValues(this._style);\n  }\n\n  // Recursively get animated values for nested styles (like iOS's shadowOffset)\n  __walkStyleAndGetAnimatedValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof Animated) {\n        updatedStyle[key] = value.__getAnimatedValue();\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this.__walkStyleAndGetAnimatedValues(value);\n      }\n    }\n    return updatedStyle;\n  }\n\n  __getAnimatedValue(): Object {\n    return this.__walkStyleAndGetAnimatedValues(this._style);\n  }\n\n  __attach(): void {\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__addChild(this);\n      }\n    }\n  }\n\n  __detach(): void {\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__removeChild(this);\n      }\n    }\n    super.__detach();\n  }\n\n  __makeNative() {\n    super.__makeNative();\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__makeNative();\n      }\n    }\n  }\n\n  __getNativeConfig(): Object {\n    var styleConfig = {};\n    for (const styleKey in this._style) {\n      if (this._style[styleKey] instanceof Animated) {\n        styleConfig[styleKey] = this._style[styleKey].__getNativeTag();\n      }\n      // Non-animated styles are set using `setNativeProps`, no need\n      // to pass those as a part of the node config\n    }\n    NativeAnimatedHelper.validateStyles(styleConfig);\n    return {\n      type: 'style',\n      style: styleConfig,\n    };\n  }\n}\n\nclass AnimatedProps extends Animated {\n  _props: Object;\n  _animatedView: any;\n  _callback: () => void;\n\n  constructor(\n    props: Object,\n    callback: () => void,\n  ) {\n    super();\n    if (props.style) {\n      props = {\n        ...props,\n        style: new AnimatedStyle(props.style),\n      };\n    }\n    this._props = props;\n    this._callback = callback;\n    this.__attach();\n  }\n\n  __getValue(): Object {\n    var props = {};\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        if (!value.__isNative || value instanceof AnimatedStyle) {\n          // We cannot use value of natively driven nodes this way as the value we have access from\n          // JS may not be up to date.\n          props[key] = value.__getValue();\n        }\n      } else if (value instanceof AnimatedEvent) {\n        props[key] = value.__getHandler();\n      } else {\n        props[key] = value;\n      }\n    }\n    return props;\n  }\n\n  __getAnimatedValue(): Object {\n    var props = {};\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        props[key] = value.__getAnimatedValue();\n      }\n    }\n    return props;\n  }\n\n  __attach(): void {\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        value.__addChild(this);\n      }\n    }\n  }\n\n  __detach(): void {\n    if (this.__isNative && this._animatedView) {\n      this.__disconnectAnimatedView();\n    }\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        value.__removeChild(this);\n      }\n    }\n    super.__detach();\n  }\n\n  update(): void {\n    this._callback();\n  }\n\n  __makeNative(): void {\n    if (!this.__isNative) {\n      this.__isNative = true;\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          value.__makeNative();\n        }\n      }\n      if (this._animatedView) {\n        this.__connectAnimatedView();\n      }\n    }\n  }\n\n  setNativeView(animatedView: any): void {\n    if (this._animatedView === animatedView) {\n      return;\n    }\n    this._animatedView = animatedView;\n    if (this.__isNative) {\n      this.__connectAnimatedView();\n    }\n  }\n\n  __connectAnimatedView(): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    var nativeViewTag: ?number = ReactNative.findNodeHandle(this._animatedView);\n    invariant(nativeViewTag != null, 'Unable to locate attached view in the native tree');\n    NativeAnimatedAPI.connectAnimatedNodeToView(this.__getNativeTag(), nativeViewTag);\n  }\n\n  __disconnectAnimatedView(): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    var nativeViewTag: ?number = ReactNative.findNodeHandle(this._animatedView);\n    invariant(nativeViewTag != null, 'Unable to locate attached view in the native tree');\n    NativeAnimatedAPI.disconnectAnimatedNodeFromView(this.__getNativeTag(), nativeViewTag);\n  }\n\n  __getNativeConfig(): Object {\n    var propsConfig = {};\n    for (const propKey in this._props) {\n      var value = this._props[propKey];\n      if (value instanceof Animated) {\n        propsConfig[propKey] = value.__getNativeTag();\n      }\n    }\n    return {\n      type: 'props',\n      props: propsConfig,\n    };\n  }\n}\n\nfunction createAnimatedComponent(Component: any): any {\n  class AnimatedComponent extends React.Component {\n    _component: any;\n    _prevComponent: any;\n    _propsAnimated: AnimatedProps;\n    _eventDetachers: Array<Function> = [];\n    _setComponentRef: Function;\n\n    constructor(props: Object) {\n      super(props);\n      this._setComponentRef = this._setComponentRef.bind(this);\n    }\n\n    componentWillUnmount() {\n      this._propsAnimated && this._propsAnimated.__detach();\n      this._detachNativeEvents();\n    }\n\n    setNativeProps(props) {\n      this._component.setNativeProps(props);\n    }\n\n    componentWillMount() {\n      this._attachProps(this.props);\n    }\n\n    componentDidMount() {\n      this._propsAnimated.setNativeView(this._component);\n      this._attachNativeEvents();\n    }\n\n    _attachNativeEvents() {\n      // Make sure to get the scrollable node for components that implement\n      // `ScrollResponder.Mixin`.\n      const scrollableNode = this._component.getScrollableNode ?\n        this._component.getScrollableNode() :\n        this._component;\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent && prop.__isNative) {\n           prop.__attach(scrollableNode, key);\n           this._eventDetachers.push(() => prop.__detach(scrollableNode, key));\n        }\n      }\n    }\n\n    _detachNativeEvents() {\n      this._eventDetachers.forEach(remove => remove());\n      this._eventDetachers = [];\n    }\n\n    _attachProps(nextProps) {\n      var oldPropsAnimated = this._propsAnimated;\n\n      // The system is best designed when setNativeProps is implemented. It is\n      // able to avoid re-rendering and directly set the attributes that\n      // changed. However, setNativeProps can only be implemented on leaf\n      // native components. If you want to animate a composite component, you\n      // need to re-render it. In this case, we have a fallback that uses\n      // forceUpdate.\n      var callback = () => {\n        if (this._component.setNativeProps) {\n          if (!this._propsAnimated.__isNative) {\n            this._component.setNativeProps(\n              this._propsAnimated.__getAnimatedValue()\n            );\n          } else {\n            throw new Error('Attempting to run JS driven animation on animated '\n              + 'node that has been moved to \"native\" earlier by starting an '\n              + 'animation with `useNativeDriver: true`');\n          }\n        } else {\n          this.forceUpdate();\n        }\n      };\n\n      this._propsAnimated = new AnimatedProps(\n        nextProps,\n        callback,\n      );\n\n      // When you call detach, it removes the element from the parent list\n      // of children. If it goes to 0, then the parent also detaches itself\n      // and so on.\n      // An optimization is to attach the new elements and THEN detach the old\n      // ones instead of detaching and THEN attaching.\n      // This way the intermediate state isn't to go to 0 and trigger\n      // this expensive recursive detaching to then re-attach everything on\n      // the very next operation.\n      oldPropsAnimated && oldPropsAnimated.__detach();\n    }\n\n    componentWillReceiveProps(newProps) {\n      this._attachProps(newProps);\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this._component !== this._prevComponent) {\n        this._propsAnimated.setNativeView(this._component);\n      }\n      if (this._component !== this._prevComponent || prevProps !== this.props) {\n        this._detachNativeEvents();\n        this._attachNativeEvents();\n      }\n    }\n\n    render() {\n      const props = this._propsAnimated.__getValue();\n      return (\n        <Component\n          {...props}\n          ref={this._setComponentRef}\n          // The native driver updates views directly through the UI thread so we\n          // have to make sure the view doesn't get optimized away because it cannot\n          // go through the NativeViewHierachyManager since it operates on the shadow\n          // thread.\n          collapsable={this._propsAnimated.__isNative ? false : props.collapsable}\n        />\n      );\n    }\n\n    _setComponentRef(c) {\n      this._prevComponent = this._component;\n      this._component = c;\n    }\n\n    // A third party library can use getNode()\n    // to get the node reference of the decorated component\n    getNode () {\n      return this._component;\n    }\n  }\n\n  // ReactNative `View.propTypes` have been deprecated in favor of\n  // `ViewPropTypes`. In their place a temporary getter has been added with a\n  // deprecated warning message. Avoid triggering that warning here by using\n  // temporary workaround, __propTypesSecretDontUseThesePlease.\n  // TODO (bvaughn) Revert this particular change any time after April 1\n  var propTypes =\n    Component.__propTypesSecretDontUseThesePlease ||\n    Component.propTypes;\n\n  AnimatedComponent.propTypes = {\n    style: function(props, propName, componentName) {\n      if (!propTypes) {\n        return;\n      }\n\n      for (var key in ViewStylePropTypes) {\n        if (!propTypes[key] && props[key] !== undefined) {\n          console.warn(\n            'You are setting the style `{ ' + key + ': ... }` as a prop. You ' +\n            'should nest it in a style object. ' +\n            'E.g. `{ style: { ' + key + ': ... } }`'\n          );\n        }\n      }\n    },\n  };\n\n  return AnimatedComponent;\n}\n\nclass AnimatedTracking extends Animated {\n  _value: AnimatedValue;\n  _parent: Animated;\n  _callback: ?EndCallback;\n  _animationConfig: Object;\n  _animationClass: any;\n\n  constructor(\n    value: AnimatedValue,\n    parent: Animated,\n    animationClass: any,\n    animationConfig: Object,\n    callback?: ?EndCallback,\n  ) {\n    super();\n    this._value = value;\n    this._parent = parent;\n    this._animationClass = animationClass;\n    this._animationConfig = animationConfig;\n    this._callback = callback;\n    this.__attach();\n  }\n\n  __getValue(): Object {\n    return this._parent.__getValue();\n  }\n\n  __attach(): void {\n    this._parent.__addChild(this);\n  }\n\n  __detach(): void {\n    this._parent.__removeChild(this);\n    super.__detach();\n  }\n\n  update(): void {\n    this._value.animate(new this._animationClass({\n      ...this._animationConfig,\n      toValue: (this._animationConfig.toValue: any).__getValue(),\n    }), this._callback);\n  }\n}\n\ntype CompositeAnimation = {\n  start: (callback?: ?EndCallback) => void,\n  stop: () => void,\n  reset: () => void,\n  _startNativeLoop: (iterations?: number) => void,\n  _isUsingNativeDriver: () => boolean,\n};\n\nvar add = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedAddition {\n  return new AnimatedAddition(a, b);\n};\n\nvar divide = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedDivision {\n  return new AnimatedDivision(a, b);\n};\n\nvar multiply = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedMultiplication {\n  return new AnimatedMultiplication(a, b);\n};\n\nvar modulo = function(\n  a: Animated,\n  modulus: number\n): AnimatedModulo {\n  return new AnimatedModulo(a, modulus);\n};\n\nvar diffClamp = function(\n  a: Animated,\n  min: number,\n  max: number,\n): AnimatedDiffClamp {\n  return new AnimatedDiffClamp(a, min, max);\n};\n\nconst _combineCallbacks = function(callback: ?EndCallback, config : AnimationConfig) {\n  if (callback && config.onComplete) {\n    return (...args) => {\n      config.onComplete && config.onComplete(...args);\n      callback && callback(...args);\n    };\n  } else {\n    return callback || config.onComplete;\n  }\n};\n\nvar maybeVectorAnim = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: Object,\n  anim: (value: AnimatedValue, config: Object) => CompositeAnimation\n): ?CompositeAnimation {\n  if (value instanceof AnimatedValueXY) {\n    var configX = {...config};\n    var configY = {...config};\n    for (var key in config) {\n      var {x, y} = config[key];\n      if (x !== undefined && y !== undefined) {\n        configX[key] = x;\n        configY[key] = y;\n      }\n    }\n    var aX = anim((value: AnimatedValueXY).x, configX);\n    var aY = anim((value: AnimatedValueXY).y, configY);\n    // We use `stopTogether: false` here because otherwise tracking will break\n    // because the second animation will get stopped before it can update.\n    return parallel([aX, aY], {stopTogether: false});\n  }\n  return null;\n};\n\nvar spring = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: SpringAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: SpringAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      if (configuration.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(\n          singleValue,\n          configuration.toValue,\n          SpringAnimation,\n          singleConfig,\n          callback\n        ));\n      } else {\n        singleValue.animate(new SpringAnimation(singleConfig), callback);\n      }\n  };\n  return maybeVectorAnim(value, config, spring) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar timing = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: TimingAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: TimingAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      if (configuration.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(\n          singleValue,\n          configuration.toValue,\n          TimingAnimation,\n          singleConfig,\n          callback\n        ));\n      } else {\n        singleValue.animate(new TimingAnimation(singleConfig), callback);\n      }\n  };\n\n  return maybeVectorAnim(value, config, timing) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar decay = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: DecayAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: DecayAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      singleValue.animate(new DecayAnimation(singleConfig), callback);\n  };\n\n  return maybeVectorAnim(value, config, decay) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar sequence = function(\n  animations: Array<CompositeAnimation>,\n): CompositeAnimation {\n  var current = 0;\n  return {\n    start: function(callback?: ?EndCallback) {\n      var onComplete = function(result) {\n        if (!result.finished) {\n          callback && callback(result);\n          return;\n        }\n\n        current++;\n\n        if (current === animations.length) {\n          callback && callback(result);\n          return;\n        }\n\n        animations[current].start(onComplete);\n      };\n\n      if (animations.length === 0) {\n        callback && callback({finished: true});\n      } else {\n        animations[current].start(onComplete);\n      }\n    },\n\n    stop: function() {\n      if (current < animations.length) {\n        animations[current].stop();\n      }\n    },\n\n    reset: function() {\n      animations.forEach((animation, idx) => {\n        if (idx <= current) {\n          animation.reset();\n        }\n      });\n      current = 0;\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return false;\n    }\n  };\n};\n\ntype ParallelConfig = {\n  stopTogether?: bool, // If one is stopped, stop all.  default: true\n}\nvar parallel = function(\n  animations: Array<CompositeAnimation>,\n  config?: ?ParallelConfig,\n): CompositeAnimation {\n  var doneCount = 0;\n  // Make sure we only call stop() at most once for each animation\n  var hasEnded = {};\n  var stopTogether = !(config && config.stopTogether === false);\n\n  var result = {\n    start: function(callback?: ?EndCallback) {\n      if (doneCount === animations.length) {\n        callback && callback({finished: true});\n        return;\n      }\n\n      animations.forEach((animation, idx) => {\n        var cb = function(endResult) {\n          hasEnded[idx] = true;\n          doneCount++;\n          if (doneCount === animations.length) {\n            doneCount = 0;\n            callback && callback(endResult);\n            return;\n          }\n\n          if (!endResult.finished && stopTogether) {\n            result.stop();\n          }\n        };\n\n        if (!animation) {\n          cb({finished: true});\n        } else {\n          animation.start(cb);\n        }\n      });\n    },\n\n    stop: function(): void {\n      animations.forEach((animation, idx) => {\n        !hasEnded[idx] && animation.stop();\n        hasEnded[idx] = true;\n      });\n    },\n\n    reset: function(): void {\n      animations.forEach((animation, idx) => {\n        animation.reset();\n        hasEnded[idx] = false;\n        doneCount = 0;\n      });\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return false;\n    }\n  };\n\n  return result;\n};\n\nvar delay = function(time: number): CompositeAnimation {\n  // Would be nice to make a specialized implementation\n  return timing(new AnimatedValue(0), {toValue: 0, delay: time, duration: 0});\n};\n\nvar stagger = function(\n  time: number,\n  animations: Array<CompositeAnimation>,\n): CompositeAnimation {\n  return parallel(animations.map((animation, i) => {\n    return sequence([\n      delay(time * i),\n      animation,\n    ]);\n  }));\n};\n\ntype LoopAnimationConfig = { iterations: number };\n\nvar loop = function(\n  animation: CompositeAnimation,\n  { iterations = -1 }: LoopAnimationConfig = {},\n): CompositeAnimation {\n  var isFinished = false;\n  var iterationsSoFar = 0;\n  return {\n    start: function(callback?: ?EndCallback) {\n      var restart = function(result: EndResult = {finished: true}): void {\n        if (isFinished ||\n            (iterationsSoFar === iterations) ||\n            (result.finished === false)) {\n          callback && callback(result);\n        } else {\n          iterationsSoFar++;\n          animation.reset();\n          animation.start(restart);\n        }\n      };\n      if (!animation || iterations === 0) {\n        callback && callback({finished: true});\n      } else {\n        if (animation._isUsingNativeDriver()) {\n          animation._startNativeLoop(iterations);\n        } else {\n          restart(); // Start looping recursively on the js thread\n        }\n      }\n    },\n\n    stop: function(): void {\n      isFinished = true;\n      animation.stop();\n    },\n\n    reset: function(): void {\n      iterationsSoFar = 0;\n      isFinished = false;\n      animation.reset();\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return animation._isUsingNativeDriver();\n    }\n  };\n};\n\ntype Mapping = {[key: string]: Mapping} | AnimatedValue;\ntype EventConfig = {\n  listener?: ?Function,\n  useNativeDriver?: bool,\n};\n\nfunction attachNativeEvent(viewRef: any, eventName: string, argMapping: Array<?Mapping>) {\n  // Find animated values in `argMapping` and create an array representing their\n  // key path inside the `nativeEvent` object. Ex.: ['contentOffset', 'x'].\n  const eventMappings = [];\n\n  const traverse = (value, path) => {\n    if (value instanceof AnimatedValue) {\n      value.__makeNative();\n\n      eventMappings.push({\n        nativeEventPath: path,\n        animatedValueTag: value.__getNativeTag(),\n      });\n    } else if (typeof value === 'object') {\n      for (const key in value) {\n        traverse(value[key], path.concat(key));\n      }\n    }\n  };\n\n  invariant(\n    argMapping[0] && argMapping[0].nativeEvent,\n    'Native driven events only support animated values contained inside `nativeEvent`.'\n  );\n\n  // Assume that the event containing `nativeEvent` is always the first argument.\n  traverse(argMapping[0].nativeEvent, []);\n\n  const viewTag = ReactNative.findNodeHandle(viewRef);\n\n  eventMappings.forEach((mapping) => {\n    NativeAnimatedAPI.addAnimatedEventToView(viewTag, eventName, mapping);\n  });\n\n  return {\n    detach() {\n      eventMappings.forEach((mapping) => {\n        NativeAnimatedAPI.removeAnimatedEventFromView(\n          viewTag,\n          eventName,\n          mapping.animatedValueTag,\n        );\n      });\n    },\n  };\n}\n\nfunction forkEvent(event: ?AnimatedEvent | ?Function, listener: Function): AnimatedEvent | Function {\n  if (!event) {\n    return listener;\n  } else if (event instanceof AnimatedEvent) {\n    event.__addListener(listener);\n    return event;\n  } else {\n    return (...args) => {\n      typeof event === 'function' && event(...args);\n      listener(...args);\n    };\n  }\n}\n\nfunction unforkEvent(event: ?AnimatedEvent | ?Function, listener: Function): void {\n  if (event && event instanceof AnimatedEvent) {\n    event.__removeListener(listener);\n  }\n}\n\nclass AnimatedEvent {\n  _argMapping: Array<?Mapping>;\n  _listeners: Array<Function> = [];\n  _callListeners: Function;\n  _attachedEvent: ?{\n    detach: () => void,\n  };\n  __isNative: bool;\n\n  constructor(\n    argMapping: Array<?Mapping>,\n    config?: EventConfig = {}\n  ) {\n    this._argMapping = argMapping;\n    if (config.listener) {\n      this.__addListener(config.listener);\n    }\n    this._callListeners = this._callListeners.bind(this);\n    this._attachedEvent = null;\n    this.__isNative = shouldUseNativeDriver(config);\n\n    if (__DEV__) {\n      this._validateMapping();\n    }\n  }\n\n  __addListener(callback: Function): void {\n    this._listeners.push(callback);\n  }\n\n  __removeListener(callback: Function): void {\n    this._listeners = this._listeners.filter((listener) => listener !== callback);\n  }\n\n  __attach(viewRef, eventName) {\n    invariant(this.__isNative, 'Only native driven events need to be attached.');\n\n    this._attachedEvent = attachNativeEvent(viewRef, eventName, this._argMapping);\n  }\n\n  __detach(viewTag, eventName) {\n    invariant(this.__isNative, 'Only native driven events need to be detached.');\n\n    this._attachedEvent && this._attachedEvent.detach();\n  }\n\n  __getHandler() {\n    if (this.__isNative) {\n      return this._callListeners;\n    }\n\n    return (...args) => {\n      const traverse = (recMapping, recEvt, key) => {\n        if (typeof recEvt === 'number' && recMapping instanceof AnimatedValue) {\n          recMapping.setValue(recEvt);\n        } else if (typeof recMapping === 'object') {\n          for (const mappingKey in recMapping) {\n            traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n          }\n        }\n      };\n\n      if (!this.__isNative) {\n        this._argMapping.forEach((mapping, idx) => {\n          traverse(mapping, args[idx], 'arg' + idx);\n        });\n      }\n      this._callListeners(...args);\n    };\n  }\n\n  _callListeners(...args) {\n    this._listeners.forEach(listener => listener(...args));\n  }\n\n  _validateMapping() {\n    const traverse = (recMapping, recEvt, key) => {\n      if (typeof recEvt === 'number') {\n        invariant(\n          recMapping instanceof AnimatedValue,\n          'Bad mapping of type ' + typeof recMapping + ' for key ' + key +\n            ', event value must map to AnimatedValue'\n        );\n        return;\n      }\n      invariant(\n        typeof recMapping === 'object',\n        'Bad mapping of type ' + typeof recMapping + ' for key ' + key\n      );\n      invariant(\n        typeof recEvt === 'object',\n        'Bad event of type ' + typeof recEvt + ' for key ' + key\n      );\n      for (const mappingKey in recMapping) {\n        traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n      }\n    };\n  }\n}\n\nvar event = function(\n  argMapping: Array<?Mapping>,\n  config?: EventConfig,\n): any {\n  const animatedEvent = new AnimatedEvent(argMapping, config);\n  if (animatedEvent.__isNative) {\n    return animatedEvent;\n  } else {\n    return animatedEvent.__getHandler();\n  }\n};\n\n/**\n * The `Animated` library is designed to make animations fluid, powerful, and\n * easy to build and maintain. `Animated` focuses on declarative relationships\n * between inputs and outputs, with configurable transforms in between, and\n * simple `start`/`stop` methods to control time-based animation execution.\n *\n * The simplest workflow for creating an animation is to to create an\n * `Animated.Value`, hook it up to one or more style attributes of an animated\n * component, and then drive updates via animations using `Animated.timing()`:\n *\n * ```javascript\n * Animated.timing(                            // Animate value over time\n *   this.state.fadeAnim,                      // The value to drive\n *   {\n *     toValue: 1,                             // Animate to final value of 1\n *   }\n * ).start();                                  // Start the animation\n * ```\n *\n * Refer to the [Animations](docs/animations.html#animated-api) guide to see\n * additional examples of `Animated` in action.\n *\n * ## Overview\n *\n * There are two value types you can use with `Animated`:\n *\n * - [`Animated.Value()`](docs/animated.html#value) for single values\n * - [`Animated.ValueXY()`](docs/animated.html#valuexy) for vectors\n *\n * `Animated.Value` can bind to style properties or other props, and can be\n * interpolated as well. A single `Animated.Value` can drive any number of\n * properties.\n *\n * ### Configuring animations\n *\n * `Animated` provides three types of animation types. Each animation type\n * provides a particular animation curve that controls how your values animate\n * from their initial value to the final value:\n *\n * - [`Animated.decay()`](docs/animated.html#decay) starts with an initial\n *   velocity and gradually slows to a stop.\n * - [`Animated.spring()`](docs/animated.html#spring) provides a simple\n *   spring physics model.\n * - [`Animated.timing()`](docs/animated.html#timing) animates a value over time\n *   using [easing functions](docs/easing.html).\n *\n * In most cases, you will be using `timing()`. By default, it uses a symmetric\n * easeInOut curve that conveys the gradual acceleration of an object to full\n * speed and concludes by gradually decelerating to a stop.\n *\n * ### Working with animations\n *\n * Animations are started by calling `start()` on your animation. `start()`\n * takes a completion callback that will be called when the animation is done.\n * If the animation finished running normally, the completion callback will be\n * invoked with `{finished: true}`. If the animation is done because `stop()`\n * was called on it before it could finish (e.g. because it was interrupted by a\n * gesture or another animation), then it will receive `{finished: false}`.\n *\n * ### Using the native driver\n *\n * By using the native driver, we send everything about the animation to native\n * before starting the animation, allowing native code to perform the animation\n * on the UI thread without having to go through the bridge on every frame.\n * Once the animation has started, the JS thread can be blocked without\n * affecting the animation.\n *\n * You can use the native driver by specifying `useNativeDriver: true` in your\n * animation configuration. See the\n * [Animations](docs/animations.html#using-the-native-driver) guide to learn\n * more.\n *\n * ### Animatable components\n *\n * Only animatable components can be animated. These special components do the\n * magic of binding the animated values to the properties, and do targeted\n * native updates to avoid the cost of the react render and reconciliation\n * process on every frame. They also handle cleanup on unmount so they are safe\n * by default.\n *\n * - [`createAnimatedComponent()`](docs/animated.html#createanimatedcomponent)\n *   can be used to make a component animatable.\n *\n * `Animated` exports the following animatable components using the above\n * wrapper:\n *\n * - `Animated.Image`\n * - `Animated.ScrollView`\n * - `Animated.Text`\n * - `Animated.View`\n *\n * ### Composing animations\n *\n * Animations can also be combined in complex ways using composition functions:\n *\n * - [`Animated.delay()`](docs/animated.html#delay) starts an animation after\n *   a given delay.\n * - [`Animated.parallel()`](docs/animated.html#parallel) starts a number of\n *   animations at the same time.\n * - [`Animated.sequence()`](docs/animated.html#sequence) starts the animations\n *   in order, waiting for each to complete before starting the next.\n * - [`Animated.stagger()`](docs/animated.html#stagger) starts animations in\n *   order and in parallel, but with successive delays.\n *\n * Animations can also be chained together simply by setting the `toValue` of\n * one animation to be another `Animated.Value`. See\n * [Tracking dynamic values](docs/animations.html#tracking-dynamic-values) in\n * the Animations guide.\n *\n * By default, if one animation is stopped or interrupted, then all other\n * animations in the group are also stopped.\n *\n * ### Combining animated values\n *\n * You can combine two animated values via addition, multiplication, division,\n * or modulo to make a new animated value:\n *\n * - [`Animated.add()`](docs/animated.html#add)\n * - [`Animated.divide()`](docs/animated.html#divide)\n * - [`Animated.modulo()`](docs/animated.html#modulo)\n * - [`Animated.multiply()`](docs/animated.html#multiply)\n *\n * ### Interpolation\n *\n * The `interpolate()` function allows input ranges to map to different output\n * ranges. By default, it will extrapolate the curve beyond the ranges given,\n * but you can also have it clamp the output value. It uses lineal interpolation\n * by default but also supports easing functions.\n *\n * - [`interpolate()`](docs/animated.html#interpolate)\n *\n * Read more about interpolation in the\n * [Animation](docs/animations.html#interpolation) guide.\n *\n * ### Handling gestures and other events\n *\n * Gestures, like panning or scrolling, and other events can map directly to\n * animated values using `Animated.event()`. This is done with a structured map\n * syntax so that values can be extracted from complex event objects. The first\n * level is an array to allow mapping across multiple args, and that array\n * contains nested objects.\n *\n * - [`Animated.event()`](docs/animated.html#event)\n *\n * For example, when working with horizontal scrolling gestures, you would do\n * the following in order to map `event.nativeEvent.contentOffset.x` to\n * `scrollX` (an `Animated.Value`):\n *\n * ```javascript\n *  onScroll={Animated.event(\n *    // scrollX = e.nativeEvent.contentOffset.x\n *    [{ nativeEvent: {\n *         contentOffset: {\n *           x: scrollX\n *         }\n *       }\n *     }]\n *  )}\n * ```\n *\n */\nmodule.exports = {\n  /**\n   * Standard value class for driving animations.  Typically initialized with\n   * `new Animated.Value(0);`\n   *\n   * See also [`AnimatedValue`](docs/animated.html#animatedvalue).\n   */\n  Value: AnimatedValue,\n  /**\n   * 2D value class for driving 2D animations, such as pan gestures.\n   *\n   * See also [`AnimatedValueXY`](docs/animated.html#animatedvaluexy).\n   */\n  ValueXY: AnimatedValueXY,\n  /**\n   * exported to use the Interpolation type in flow\n   *\n   * See also [`AnimatedInterpolation`](docs/animated.html#animatedinterpolation).\n   */\n  Interpolation: AnimatedInterpolation,\n\n  /**\n   * Animates a value from an initial velocity to zero based on a decay\n   * coefficient.\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `velocity`: Initial velocity.  Required.\n   *   - `deceleration`: Rate of decay.  Default 0.997.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  decay,\n  /**\n   * Animates a value along a timed easing curve. The\n   * [`Easing`](docs/easing.html) module has tons of predefined curves, or you\n   * can use your own function.\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `duration`: Length of animation (milliseconds).  Default 500.\n   *   - `easing`: Easing function to define curve.\n   *     Default is `Easing.inOut(Easing.ease)`.\n   *   - `delay`: Start the animation after delay (milliseconds).  Default 0.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  timing,\n  /**\n   * Spring animation based on Rebound and\n   * [Origami](https://facebook.github.io/origami/).  Tracks velocity state to\n   * create fluid motions as the `toValue` updates, and can be chained together.\n   *\n   * Config is an object that may have the following options. Note that you can\n   * only define bounciness/speed or tension/friction but not both:\n   *\n   *   - `friction`: Controls \"bounciness\"/overshoot.  Default 7.\n   *   - `tension`: Controls speed.  Default 40.\n   *   - `speed`: Controls speed of the animation. Default 12.\n   *   - `bounciness`: Controls bounciness. Default 8.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  spring,\n\n  /**\n   * Creates a new Animated value composed from two Animated values added\n   * together.\n   */\n  add,\n\n  /**\n   * Creates a new Animated value composed by dividing the first Animated value\n   * by the second Animated value.\n   */\n  divide,\n\n  /**\n   * Creates a new Animated value composed from two Animated values multiplied\n   * together.\n   */\n  multiply,\n\n  /**\n   * Creates a new Animated value that is the (non-negative) modulo of the\n   * provided Animated value\n   */\n  modulo,\n\n  /**\n   * Create a new Animated value that is limited between 2 values. It uses the\n   * difference between the last value so even if the value is far from the bounds\n   * it will start changing when the value starts getting closer again.\n   * (`value = clamp(value + diff, min, max)`).\n   *\n   * This is useful with scroll events, for example, to show the navbar when\n   * scrolling up and to hide it when scrolling down.\n   */\n  diffClamp,\n\n  /**\n   * Starts an animation after the given delay.\n   */\n  delay,\n  /**\n   * Starts an array of animations in order, waiting for each to complete\n   * before starting the next.  If the current running animation is stopped, no\n   * following animations will be started.\n   */\n  sequence,\n  /**\n   * Starts an array of animations all at the same time.  By default, if one\n   * of the animations is stopped, they will all be stopped.  You can override\n   * this with the `stopTogether` flag.\n   */\n  parallel,\n  /**\n   * Array of animations may run in parallel (overlap), but are started in\n   * sequence with successive delays.  Nice for doing trailing effects.\n   */\n  stagger,\n  /**\n  * Loops a given animation continuously, so that each time it reaches the\n  * end, it resets and begins again from the start. Can specify number of\n  * times to loop using the key 'iterations' in the config. Will loop without\n  * blocking the UI thread if the child animation is set to 'useNativeDriver'.\n  */\n  loop,\n\n  /**\n   * Takes an array of mappings and extracts values from each arg accordingly,\n   * then calls `setValue` on the mapped outputs.  e.g.\n   *\n   *```javascript\n   *  onScroll={Animated.event(\n   *    [{nativeEvent: {contentOffset: {x: this._scrollX}}}],\n   *    {listener},          // Optional async listener\n   *  )}\n   *  ...\n   *  onPanResponderMove: Animated.event([\n   *    null,                // raw event arg ignored\n   *    {dx: this._panX},    // gestureState arg\n   *  ]),\n   *```\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `listener`: Optional async listener.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  event,\n\n  /**\n   * Make any React component Animatable.  Used to create `Animated.View`, etc.\n   */\n  createAnimatedComponent,\n\n  /**\n   * Imperative API to attach an animated value to an event on a view. Prefer using\n   * `Animated.event` with `useNativeDrive: true` if possible.\n   */\n  attachNativeEvent,\n\n  /**\n   * Advanced imperative API for snooping on animated events that are passed in through props. Use\n   * values directly where possible.\n   */\n  forkEvent,\n  unforkEvent,\n\n  __PropsOnlyForTests: AnimatedProps,\n};\n"]}