{"version":3,"sources":["node_modules/react-native/Libraries/Animated/src/NativeAnimatedHelper.js"],"names":["NativeAnimatedModule","require","NativeEventEmitter","invariant","__nativeAnimatedNodeTagCount","__nativeAnimationIdCount","nativeEventEmitter","API","createAnimatedNode","tag","config","assertNativeAnimatedModule","startListeningToAnimatedNodeValue","stopListeningToAnimatedNodeValue","connectAnimatedNodes","parentTag","childTag","disconnectAnimatedNodes","startAnimatingNode","animationId","nodeTag","endCallback","stopAnimation","setAnimatedNodeValue","value","setAnimatedNodeOffset","offset","flattenAnimatedNodeOffset","extractAnimatedNodeOffset","connectAnimatedNodeToView","viewTag","disconnectAnimatedNodeFromView","dropAnimatedNode","addAnimatedEventToView","eventName","eventMapping","removeAnimatedEventFromView","animatedNodeTag","STYLES_WHITELIST","opacity","transform","scaleX","scaleY","translateX","translateY","TRANSFORM_WHITELIST","scale","rotate","rotateX","rotateY","perspective","validateTransform","configs","forEach","hasOwnProperty","property","Error","validateStyles","styles","key","validateInterpolation","SUPPORTED_INTERPOLATION_PARAMS","inputRange","outputRange","extrapolate","extrapolateRight","extrapolateLeft","generateNewNodeTag","generateNewAnimationId","isNativeAnimatedAvailable","module","exports"],"mappings":"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","file":"NativeAnimatedHelper.js","sourceRoot":"/home/phz/workspace/brimitives/storybooks/native","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule NativeAnimatedHelper\n * @flow\n */\n'use strict';\n\nconst NativeAnimatedModule = require('NativeModules').NativeAnimatedModule;\nconst NativeEventEmitter = require('NativeEventEmitter');\n\nconst invariant = require('fbjs/lib/invariant');\n\nlet __nativeAnimatedNodeTagCount = 1; /* used for animated nodes */\nlet __nativeAnimationIdCount = 1; /* used for started animations */\n\ntype EndResult = {finished: boolean};\ntype EndCallback = (result: EndResult) => void;\ntype EventMapping = {\n  nativeEventPath: Array<string>,\n  animatedValueTag: ?number,\n};\n\nlet nativeEventEmitter;\n\n/**\n * Simple wrappers around NativeAnimatedModule to provide flow and autocmplete support for\n * the native module methods\n */\nconst API = {\n  createAnimatedNode: function(tag: ?number, config: Object): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.createAnimatedNode(tag, config);\n  },\n  startListeningToAnimatedNodeValue: function(tag: ?number) {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);\n  },\n  stopListeningToAnimatedNodeValue: function(tag: ?number) {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);\n  },\n  connectAnimatedNodes: function(parentTag: ?number, childTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.connectAnimatedNodes(parentTag, childTag);\n  },\n  disconnectAnimatedNodes: function(parentTag: ?number, childTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.disconnectAnimatedNodes(parentTag, childTag);\n  },\n  startAnimatingNode: function(animationId: ?number, nodeTag: ?number, config: Object, endCallback: EndCallback): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.startAnimatingNode(animationId, nodeTag, config, endCallback);\n  },\n  stopAnimation: function(animationId: ?number) {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.stopAnimation(animationId);\n  },\n  setAnimatedNodeValue: function(nodeTag: ?number, value: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.setAnimatedNodeValue(nodeTag, value);\n  },\n  setAnimatedNodeOffset: function(nodeTag: ?number, offset: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.setAnimatedNodeOffset(nodeTag, offset);\n  },\n  flattenAnimatedNodeOffset: function(nodeTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);\n  },\n  extractAnimatedNodeOffset: function(nodeTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);\n  },\n  connectAnimatedNodeToView: function(nodeTag: ?number, viewTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.connectAnimatedNodeToView(nodeTag, viewTag);\n  },\n  disconnectAnimatedNodeFromView: function(nodeTag: ?number, viewTag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag, viewTag);\n  },\n  dropAnimatedNode: function(tag: ?number): void {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.dropAnimatedNode(tag);\n  },\n  addAnimatedEventToView: function(viewTag: ?number, eventName: string, eventMapping: EventMapping) {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.addAnimatedEventToView(viewTag, eventName, eventMapping);\n  },\n  removeAnimatedEventFromView(viewTag: ?number, eventName: string, animatedNodeTag: ?number) {\n    assertNativeAnimatedModule();\n    NativeAnimatedModule.removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag);\n  }\n};\n\n/**\n * Styles allowed by the native animated implementation.\n *\n * In general native animated implementation should support any numeric property that doesn't need\n * to be updated through the shadow view hierarchy (all non-layout properties).\n */\nconst STYLES_WHITELIST = {\n  opacity: true,\n  transform: true,\n  /* legacy android transform properties */\n  scaleX: true,\n  scaleY: true,\n  translateX: true,\n  translateY: true,\n};\n\nconst TRANSFORM_WHITELIST = {\n  translateX: true,\n  translateY: true,\n  scale: true,\n  scaleX: true,\n  scaleY: true,\n  rotate: true,\n  rotateX: true,\n  rotateY: true,\n  perspective: true,\n};\n\nfunction validateTransform(configs: Array<Object>): void {\n  configs.forEach((config) => {\n    if (!TRANSFORM_WHITELIST.hasOwnProperty(config.property)) {\n      throw new Error(`Property '${config.property}' is not supported by native animated module`);\n    }\n  });\n}\n\nfunction validateStyles(styles: Object): void {\n  for (var key in styles) {\n    if (!STYLES_WHITELIST.hasOwnProperty(key)) {\n      throw new Error(`Style property '${key}' is not supported by native animated module`);\n    }\n  }\n}\n\nfunction validateInterpolation(config: Object): void {\n  var SUPPORTED_INTERPOLATION_PARAMS = {\n    inputRange: true,\n    outputRange: true,\n    extrapolate: true,\n    extrapolateRight: true,\n    extrapolateLeft: true,\n  };\n  for (var key in config) {\n    if (!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(key)) {\n      throw new Error(`Interpolation property '${key}' is not supported by native animated module`);\n    }\n  }\n}\n\nfunction generateNewNodeTag(): number {\n  return __nativeAnimatedNodeTagCount++;\n}\n\nfunction generateNewAnimationId(): number {\n  return __nativeAnimationIdCount++;\n}\n\nfunction assertNativeAnimatedModule(): void {\n  invariant(NativeAnimatedModule, 'Native animated module is not available');\n}\n\nfunction isNativeAnimatedAvailable(): boolean {\n  return !!NativeAnimatedModule;\n}\n\nmodule.exports = {\n  API,\n  validateStyles,\n  validateTransform,\n  validateInterpolation,\n  generateNewNodeTag,\n  generateNewAnimationId,\n  assertNativeAnimatedModule,\n  isNativeAnimatedAvailable,\n  get nativeEventEmitter() {\n    if (!nativeEventEmitter) {\n      nativeEventEmitter = new NativeEventEmitter(NativeAnimatedModule);\n    }\n    return nativeEventEmitter;\n  },\n};\n"]}